<!DOCTYPE html>


<html xmlns="http://www.w3.org/1999/xhtml" lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>pyrocko.fdsn.station &#8212; Pyrocko v0.3 Manual</title>
    
    <link rel="stylesheet" href="../../../_static/pydoctheme.css" type="text/css" />
    <link rel="stylesheet" href="../../../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../../',
        VERSION:     '0.3',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true,
        SOURCELINK_SUFFIX: '.txt'
      };
    </script>
    <script type="text/javascript" src="../../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../../_static/doctools.js"></script>
    <script type="text/javascript" src="../../../_static/sidebar.js"></script>
    <link rel="search" type="application/opensearchdescription+xml"
          title="Search within Pyrocko v0.3 Manual"
          href="../../../_static/opensearch.xml"/>
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" />
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <link rel="shortcut icon" type="image/png" href="../../../_static/favicon.png" />
    <meta name="viewport" content="width=device-width,initial-scale=0.8">
    
    
    

  </head>
  <body role="document">
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="responsive-menu"><a href="#sidebar-anchor" title="Navigation">&#9776;</a></li>
        <li><a href="../../../index.html">Pyrocko v0.3 Manual</a> &#187;</li>
          <li><a href="../../index.html" accesskey="U">Module code</a> &#187;</li> 
      </ul>
    </div>
    
  

    <div class="document">
      <div class="documentwrapper">
          <div class="body" role="main">
            
  <h1>Source code for pyrocko.fdsn.station</h1><div class="highlight"><pre>
<span class="kn">import</span> <span class="nn">sys</span>
<span class="kn">import</span> <span class="nn">time</span>
<span class="kn">import</span> <span class="nn">logging</span>
<span class="kn">import</span> <span class="nn">datetime</span>
<span class="kn">import</span> <span class="nn">calendar</span>
<span class="kn">import</span> <span class="nn">re</span>
<span class="kn">import</span> <span class="nn">math</span>
<span class="kn">import</span> <span class="nn">copy</span>

<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">num</span>

<span class="kn">from</span> <span class="nn">pyrocko.guts</span> <span class="k">import</span> <span class="n">StringChoice</span><span class="p">,</span> <span class="n">StringPattern</span><span class="p">,</span> <span class="n">UnicodePattern</span><span class="p">,</span> <span class="n">String</span><span class="p">,</span>\
    <span class="n">Unicode</span><span class="p">,</span> <span class="n">Int</span><span class="p">,</span> <span class="n">Float</span><span class="p">,</span> <span class="n">List</span><span class="p">,</span> <span class="n">Object</span><span class="p">,</span> <span class="n">Timestamp</span><span class="p">,</span> <span class="n">ValidationError</span><span class="p">,</span> <span class="n">TBase</span>
<span class="kn">from</span> <span class="nn">pyrocko.guts</span> <span class="k">import</span> <span class="n">load_xml</span>  <span class="c"># noqa</span>

<span class="kn">from</span> <span class="nn">pyrocko</span> <span class="k">import</span> <span class="n">trace</span><span class="p">,</span> <span class="n">model</span><span class="p">,</span> <span class="n">util</span>

<span class="n">guts_prefix</span> <span class="o">=</span> <span class="s">&#39;pf&#39;</span>

<span class="n">logger</span> <span class="o">=</span> <span class="n">logging</span><span class="o">.</span><span class="n">getLogger</span><span class="p">(</span><span class="s">&#39;pyrocko.fdsn.station&#39;</span><span class="p">)</span>

<span class="n">conversion</span> <span class="o">=</span> <span class="p">{</span>
    <span class="p">(</span><span class="s">&#39;M&#39;</span><span class="p">,</span> <span class="s">&#39;M&#39;</span><span class="p">):</span> <span class="k">None</span><span class="p">,</span>
    <span class="p">(</span><span class="s">&#39;M/S&#39;</span><span class="p">,</span> <span class="s">&#39;M&#39;</span><span class="p">):</span> <span class="n">trace</span><span class="o">.</span><span class="n">IntegrationResponse</span><span class="p">(</span><span class="mi">1</span><span class="p">),</span>
    <span class="p">(</span><span class="s">&#39;M/S**2&#39;</span><span class="p">,</span> <span class="s">&#39;M&#39;</span><span class="p">):</span> <span class="n">trace</span><span class="o">.</span><span class="n">IntegrationResponse</span><span class="p">(</span><span class="mi">2</span><span class="p">),</span>
    <span class="p">(</span><span class="s">&#39;M&#39;</span><span class="p">,</span> <span class="s">&#39;M/S&#39;</span><span class="p">):</span> <span class="n">trace</span><span class="o">.</span><span class="n">DifferentiationResponse</span><span class="p">(</span><span class="mi">1</span><span class="p">),</span>
    <span class="p">(</span><span class="s">&#39;M/S&#39;</span><span class="p">,</span> <span class="s">&#39;M/S&#39;</span><span class="p">):</span> <span class="k">None</span><span class="p">,</span>
    <span class="p">(</span><span class="s">&#39;M/S**2&#39;</span><span class="p">,</span> <span class="s">&#39;M/S&#39;</span><span class="p">):</span> <span class="n">trace</span><span class="o">.</span><span class="n">IntegrationResponse</span><span class="p">(</span><span class="mi">1</span><span class="p">),</span>
    <span class="p">(</span><span class="s">&#39;M&#39;</span><span class="p">,</span> <span class="s">&#39;M/S**2&#39;</span><span class="p">):</span> <span class="n">trace</span><span class="o">.</span><span class="n">DifferentiationResponse</span><span class="p">(</span><span class="mi">2</span><span class="p">),</span>
    <span class="p">(</span><span class="s">&#39;M/S&#39;</span><span class="p">,</span> <span class="s">&#39;M/S**2&#39;</span><span class="p">):</span> <span class="n">trace</span><span class="o">.</span><span class="n">DifferentiationResponse</span><span class="p">(</span><span class="mi">1</span><span class="p">),</span>
    <span class="p">(</span><span class="s">&#39;M/S**2&#39;</span><span class="p">,</span> <span class="s">&#39;M/S**2&#39;</span><span class="p">):</span> <span class="k">None</span><span class="p">}</span>


<span class="k">class</span> <span class="nc">NoResponseInformation</span><span class="p">(</span><span class="ne">Exception</span><span class="p">):</span>
    <span class="k">pass</span>


<span class="k">class</span> <span class="nc">MultipleResponseInformation</span><span class="p">(</span><span class="ne">Exception</span><span class="p">):</span>
    <span class="k">pass</span>


<span class="k">def</span> <span class="nf">wrap</span><span class="p">(</span><span class="n">s</span><span class="p">,</span> <span class="n">width</span><span class="o">=</span><span class="mi">80</span><span class="p">,</span> <span class="n">indent</span><span class="o">=</span><span class="mi">4</span><span class="p">):</span>
    <span class="n">words</span> <span class="o">=</span> <span class="n">s</span><span class="o">.</span><span class="n">split</span><span class="p">()</span>
    <span class="n">lines</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">t</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">n</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="k">for</span> <span class="n">w</span> <span class="ow">in</span> <span class="n">words</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">n</span> <span class="o">+</span> <span class="nb">len</span><span class="p">(</span><span class="n">w</span><span class="p">)</span> <span class="o">&gt;=</span> <span class="n">width</span><span class="p">:</span>
            <span class="n">lines</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s">&#39; &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">t</span><span class="p">))</span>
            <span class="n">n</span> <span class="o">=</span> <span class="n">indent</span>
            <span class="n">t</span> <span class="o">=</span> <span class="p">[</span><span class="s">&#39; &#39;</span><span class="o">*</span><span class="p">(</span><span class="n">indent</span><span class="o">-</span><span class="mi">1</span><span class="p">)]</span>

        <span class="n">t</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">w</span><span class="p">)</span>
        <span class="n">n</span> <span class="o">+=</span> <span class="nb">len</span><span class="p">(</span><span class="n">w</span><span class="p">)</span> <span class="o">+</span> <span class="mi">1</span>

    <span class="n">lines</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s">&#39; &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">t</span><span class="p">))</span>
    <span class="k">return</span> <span class="s">&#39;</span><span class="se">\n</span><span class="s">&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">lines</span><span class="p">)</span>


<span class="k">def</span> <span class="nf">same</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">eps</span><span class="o">=</span><span class="mf">0.0</span><span class="p">):</span>
    <span class="k">if</span> <span class="nb">any</span><span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="n">x</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="o">!=</span> <span class="nb">type</span><span class="p">(</span><span class="n">r</span><span class="p">)</span> <span class="k">for</span> <span class="n">r</span> <span class="ow">in</span> <span class="n">x</span><span class="p">):</span>
        <span class="k">return</span> <span class="k">False</span>

    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">x</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="nb">float</span><span class="p">):</span>
        <span class="k">return</span> <span class="nb">all</span><span class="p">(</span><span class="nb">abs</span><span class="p">(</span><span class="n">r</span><span class="o">-</span><span class="n">x</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="o">&lt;=</span> <span class="n">eps</span> <span class="k">for</span> <span class="n">r</span> <span class="ow">in</span> <span class="n">x</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">return</span> <span class="nb">all</span><span class="p">(</span><span class="n">r</span> <span class="o">==</span> <span class="n">x</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="k">for</span> <span class="n">r</span> <span class="ow">in</span> <span class="n">x</span><span class="p">)</span>


<span class="n">this_year</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">gmtime</span><span class="p">()[</span><span class="mi">0</span><span class="p">]</span>


<div class="viewcode-block" id="DummyAwareOptionalTimestamp"><a class="viewcode-back" href="../../../library/reference/fdsn.html#pyrocko.fdsn.station.DummyAwareOptionalTimestamp">[docs]</a><span class="k">class</span> <span class="nc">DummyAwareOptionalTimestamp</span><span class="p">(</span><span class="n">Object</span><span class="p">):</span>
    <span class="n">dummy_for</span> <span class="o">=</span> <span class="nb">float</span>

    <span class="k">class</span> <span class="nc">__T</span><span class="p">(</span><span class="n">TBase</span><span class="p">):</span>

        <span class="k">def</span> <span class="nf">regularize_extra</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">val</span><span class="p">):</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">val</span><span class="p">,</span> <span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="p">):</span>
                <span class="n">tt</span> <span class="o">=</span> <span class="n">val</span><span class="o">.</span><span class="n">utctimetuple</span><span class="p">()</span>
                <span class="n">val</span> <span class="o">=</span> <span class="n">calendar</span><span class="o">.</span><span class="n">timegm</span><span class="p">(</span><span class="n">tt</span><span class="p">)</span> <span class="o">+</span> <span class="n">val</span><span class="o">.</span><span class="n">microsecond</span> <span class="o">*</span> <span class="mi">1</span><span class="n">e</span><span class="o">-</span><span class="mi">6</span>

            <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">val</span><span class="p">,</span> <span class="n">datetime</span><span class="o">.</span><span class="n">date</span><span class="p">):</span>
                <span class="n">tt</span> <span class="o">=</span> <span class="n">val</span><span class="o">.</span><span class="n">timetuple</span><span class="p">()</span>
                <span class="n">val</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">calendar</span><span class="o">.</span><span class="n">timegm</span><span class="p">(</span><span class="n">tt</span><span class="p">))</span>

            <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">val</span><span class="p">,</span> <span class="nb">str</span><span class="p">)</span> <span class="ow">or</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">val</span><span class="p">,</span> <span class="n">unicode</span><span class="p">):</span>
                <span class="n">val</span> <span class="o">=</span> <span class="n">val</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>

                <span class="n">val</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">sub</span><span class="p">(</span><span class="s">r&#39;(Z|\+00(:?00)?)$&#39;</span><span class="p">,</span> <span class="s">&#39;&#39;</span><span class="p">,</span> <span class="n">val</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">val</span><span class="p">[</span><span class="mi">10</span><span class="p">]</span> <span class="o">==</span> <span class="s">&#39;T&#39;</span><span class="p">:</span>
                    <span class="n">val</span> <span class="o">=</span> <span class="n">val</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s">&#39;T&#39;</span><span class="p">,</span> <span class="s">&#39; &#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>

                <span class="k">try</span><span class="p">:</span>
                    <span class="n">val</span> <span class="o">=</span> <span class="n">util</span><span class="o">.</span><span class="n">str_to_time</span><span class="p">(</span><span class="n">val</span><span class="p">)</span>

                <span class="k">except</span> <span class="n">util</span><span class="o">.</span><span class="n">TimeStrError</span><span class="p">:</span>
                    <span class="n">year</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">val</span><span class="p">[:</span><span class="mi">4</span><span class="p">])</span>
                    <span class="k">if</span> <span class="n">sys</span><span class="o">.</span><span class="n">maxsize</span> <span class="o">&gt;</span> <span class="mi">2</span><span class="o">**</span><span class="mi">32</span><span class="p">:</span>  <span class="c"># if we&#39;re on 64bit</span>
                        <span class="k">if</span> <span class="n">year</span> <span class="o">&gt;</span> <span class="n">this_year</span> <span class="o">+</span> <span class="mi">100</span><span class="p">:</span>
                            <span class="k">return</span> <span class="k">None</span>  <span class="c"># StationXML contained a dummy date</span>

                    <span class="k">else</span><span class="p">:</span>  <span class="c"># 32bit end of time is in 2038</span>
                        <span class="k">if</span> <span class="n">this_year</span> <span class="o">&lt;</span> <span class="mi">2037</span> <span class="ow">and</span> <span class="n">year</span> <span class="o">&gt;</span> <span class="mi">2037</span> <span class="ow">or</span> <span class="n">year</span> <span class="o">&lt;</span> <span class="mi">1903</span><span class="p">:</span>
                            <span class="k">return</span> <span class="k">None</span>  <span class="c"># StationXML contained a dummy date</span>

                    <span class="k">raise</span>

            <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">val</span><span class="p">,</span> <span class="nb">int</span><span class="p">):</span>
                <span class="n">val</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">val</span><span class="p">)</span>

            <span class="k">else</span><span class="p">:</span>
                <span class="k">raise</span> <span class="n">ValidationError</span><span class="p">(</span>
                    <span class="s">&#39;%s: cannot convert &quot;%s&quot; to float&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">xname</span><span class="p">(),</span> <span class="n">val</span><span class="p">))</span>

            <span class="k">return</span> <span class="n">val</span>

        <span class="k">def</span> <span class="nf">to_save</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">val</span><span class="p">):</span>
            <span class="k">return</span> <span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="o">.</span><span class="n">utcfromtimestamp</span><span class="p">(</span><span class="n">val</span><span class="p">)</span>

        <span class="k">def</span> <span class="nf">to_save_xml</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">val</span><span class="p">):</span>
            <span class="k">return</span> <span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="o">.</span><span class="n">utcfromtimestamp</span><span class="p">(</span><span class="n">val</span><span class="p">)</span><span class="o">.</span><span class="n">isoformat</span><span class="p">()</span> <span class="o">+</span> <span class="s">&#39;Z&#39;</span></div>


<div class="viewcode-block" id="Nominal"><a class="viewcode-back" href="../../../library/reference/fdsn.html#pyrocko.fdsn.station.Nominal">[docs]</a><span class="k">class</span> <span class="nc">Nominal</span><span class="p">(</span><span class="n">StringChoice</span><span class="p">):</span>
    <span class="n">choices</span> <span class="o">=</span> <span class="p">[</span>
        <span class="s">&#39;NOMINAL&#39;</span><span class="p">,</span>
        <span class="s">&#39;CALCULATED&#39;</span><span class="p">]</span></div>


<div class="viewcode-block" id="Email"><a class="viewcode-back" href="../../../library/reference/fdsn.html#pyrocko.fdsn.station.Email">[docs]</a><span class="k">class</span> <span class="nc">Email</span><span class="p">(</span><span class="n">UnicodePattern</span><span class="p">):</span>
    <span class="n">pattern</span> <span class="o">=</span> <span class="s">u&#39;[</span><span class="se">\\</span><span class="s">w</span><span class="se">\\</span><span class="s">.</span><span class="se">\\</span><span class="s">-_]+@[</span><span class="se">\\</span><span class="s">w</span><span class="se">\\</span><span class="s">.</span><span class="se">\\</span><span class="s">-_]+&#39;</span></div>


<div class="viewcode-block" id="RestrictedStatus"><a class="viewcode-back" href="../../../library/reference/fdsn.html#pyrocko.fdsn.station.RestrictedStatus">[docs]</a><span class="k">class</span> <span class="nc">RestrictedStatus</span><span class="p">(</span><span class="n">StringChoice</span><span class="p">):</span>
    <span class="n">choices</span> <span class="o">=</span> <span class="p">[</span>
        <span class="s">&#39;open&#39;</span><span class="p">,</span>
        <span class="s">&#39;closed&#39;</span><span class="p">,</span>
        <span class="s">&#39;partial&#39;</span><span class="p">]</span></div>


<div class="viewcode-block" id="Type"><a class="viewcode-back" href="../../../library/reference/fdsn.html#pyrocko.fdsn.station.Type">[docs]</a><span class="k">class</span> <span class="nc">Type</span><span class="p">(</span><span class="n">StringChoice</span><span class="p">):</span>
    <span class="n">choices</span> <span class="o">=</span> <span class="p">[</span>
        <span class="s">&#39;TRIGGERED&#39;</span><span class="p">,</span>
        <span class="s">&#39;CONTINUOUS&#39;</span><span class="p">,</span>
        <span class="s">&#39;HEALTH&#39;</span><span class="p">,</span>
        <span class="s">&#39;GEOPHYSICAL&#39;</span><span class="p">,</span>
        <span class="s">&#39;WEATHER&#39;</span><span class="p">,</span>
        <span class="s">&#39;FLAG&#39;</span><span class="p">,</span>
        <span class="s">&#39;SYNTHESIZED&#39;</span><span class="p">,</span>
        <span class="s">&#39;INPUT&#39;</span><span class="p">,</span>
        <span class="s">&#39;EXPERIMENTAL&#39;</span><span class="p">,</span>
        <span class="s">&#39;MAINTENANCE&#39;</span><span class="p">,</span>
        <span class="s">&#39;BEAM&#39;</span><span class="p">]</span>

    <span class="k">class</span> <span class="nc">__T</span><span class="p">(</span><span class="n">StringChoice</span><span class="o">.</span><span class="n">T</span><span class="p">):</span>
        <span class="k">def</span> <span class="nf">validate_extra</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">val</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">val</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">choices</span><span class="p">:</span>
                <span class="n">logger</span><span class="o">.</span><span class="n">warn</span><span class="p">(</span>
                    <span class="s">&#39;channel type: &quot;%s&quot; is not a valid choice out of %s&#39;</span> <span class="o">%</span>
                    <span class="p">(</span><span class="n">val</span><span class="p">,</span> <span class="nb">repr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">choices</span><span class="p">)))</span></div>


<div class="viewcode-block" id="PzTransferFunction"><a class="viewcode-back" href="../../../library/reference/fdsn.html#pyrocko.fdsn.station.PzTransferFunction">[docs]</a><span class="k">class</span> <span class="nc">PzTransferFunction</span><span class="p">(</span><span class="n">StringChoice</span><span class="p">):</span>
    <span class="n">choices</span> <span class="o">=</span> <span class="p">[</span>
        <span class="s">&#39;LAPLACE (RADIANS/SECOND)&#39;</span><span class="p">,</span>
        <span class="s">&#39;LAPLACE (HERTZ)&#39;</span><span class="p">,</span>
        <span class="s">&#39;DIGITAL (Z-TRANSFORM)&#39;</span><span class="p">]</span></div>


<div class="viewcode-block" id="Symmetry"><a class="viewcode-back" href="../../../library/reference/fdsn.html#pyrocko.fdsn.station.Symmetry">[docs]</a><span class="k">class</span> <span class="nc">Symmetry</span><span class="p">(</span><span class="n">StringChoice</span><span class="p">):</span>
    <span class="n">choices</span> <span class="o">=</span> <span class="p">[</span>
        <span class="s">&#39;NONE&#39;</span><span class="p">,</span>
        <span class="s">&#39;EVEN&#39;</span><span class="p">,</span>
        <span class="s">&#39;ODD&#39;</span><span class="p">]</span></div>


<div class="viewcode-block" id="CfTransferFunction"><a class="viewcode-back" href="../../../library/reference/fdsn.html#pyrocko.fdsn.station.CfTransferFunction">[docs]</a><span class="k">class</span> <span class="nc">CfTransferFunction</span><span class="p">(</span><span class="n">StringChoice</span><span class="p">):</span>

    <span class="k">class</span> <span class="nc">__T</span><span class="p">(</span><span class="n">StringChoice</span><span class="o">.</span><span class="n">T</span><span class="p">):</span>
        <span class="k">def</span> <span class="nf">validate</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">val</span><span class="p">,</span> <span class="n">regularize</span><span class="o">=</span><span class="k">False</span><span class="p">,</span> <span class="n">depth</span><span class="o">=-</span><span class="mi">1</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">regularize</span><span class="p">:</span>
                <span class="k">try</span><span class="p">:</span>
                    <span class="n">val</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">val</span><span class="p">)</span>
                <span class="k">except</span> <span class="ne">ValueError</span><span class="p">:</span>
                    <span class="k">raise</span> <span class="n">ValidationError</span><span class="p">(</span>
                        <span class="s">&#39;%s: cannot convert to string %s&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">xname</span><span class="p">,</span>
                                                             <span class="nb">repr</span><span class="p">(</span><span class="n">val</span><span class="p">)))</span>

                <span class="n">val</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dummy_cls</span><span class="o">.</span><span class="n">replacements</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">val</span><span class="p">,</span> <span class="n">val</span><span class="p">)</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">validate_extra</span><span class="p">(</span><span class="n">val</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">val</span>

    <span class="n">choices</span> <span class="o">=</span> <span class="p">[</span>
        <span class="s">&#39;ANALOG (RADIANS/SECOND)&#39;</span><span class="p">,</span>
        <span class="s">&#39;ANALOG (HERTZ)&#39;</span><span class="p">,</span>
        <span class="s">&#39;DIGITAL&#39;</span><span class="p">]</span>

    <span class="n">replacements</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s">&#39;ANALOG (RAD/SEC)&#39;</span><span class="p">:</span> <span class="s">&#39;ANALOG (RADIANS/SECOND)&#39;</span><span class="p">,</span>
        <span class="s">&#39;ANALOG (HZ)&#39;</span><span class="p">:</span> <span class="s">&#39;ANALOG (HERTZ)&#39;</span><span class="p">,</span>
    <span class="p">}</span></div>


<div class="viewcode-block" id="Approximation"><a class="viewcode-back" href="../../../library/reference/fdsn.html#pyrocko.fdsn.station.Approximation">[docs]</a><span class="k">class</span> <span class="nc">Approximation</span><span class="p">(</span><span class="n">StringChoice</span><span class="p">):</span>
    <span class="n">choices</span> <span class="o">=</span> <span class="p">[</span>
        <span class="s">&#39;MACLAURIN&#39;</span><span class="p">]</span></div>


<span class="k">class</span> <span class="nc">PhoneNumber</span><span class="p">(</span><span class="n">StringPattern</span><span class="p">):</span>
    <span class="n">pattern</span> <span class="o">=</span> <span class="s">&#39;[0-9]+-[0-9]+&#39;</span>


<div class="viewcode-block" id="Site"><a class="viewcode-back" href="../../../library/reference/fdsn.html#pyrocko.fdsn.station.Site">[docs]</a><span class="k">class</span> <span class="nc">Site</span><span class="p">(</span><span class="n">Object</span><span class="p">):</span>
    <span class="sd">&#39;&#39;&#39;Description of a site location using name and optional</span>
<span class="sd">    geopolitical boundaries (country, city, etc.).&#39;&#39;&#39;</span>

    <span class="n">name</span> <span class="o">=</span> <span class="n">Unicode</span><span class="o">.</span><span class="n">T</span><span class="p">(</span><span class="n">xmltagname</span><span class="o">=</span><span class="s">&#39;Name&#39;</span><span class="p">)</span>
    <span class="n">description</span> <span class="o">=</span> <span class="n">Unicode</span><span class="o">.</span><span class="n">T</span><span class="p">(</span><span class="n">optional</span><span class="o">=</span><span class="k">True</span><span class="p">,</span> <span class="n">xmltagname</span><span class="o">=</span><span class="s">&#39;Description&#39;</span><span class="p">)</span>
    <span class="n">town</span> <span class="o">=</span> <span class="n">Unicode</span><span class="o">.</span><span class="n">T</span><span class="p">(</span><span class="n">optional</span><span class="o">=</span><span class="k">True</span><span class="p">,</span> <span class="n">xmltagname</span><span class="o">=</span><span class="s">&#39;Town&#39;</span><span class="p">)</span>
    <span class="n">county</span> <span class="o">=</span> <span class="n">Unicode</span><span class="o">.</span><span class="n">T</span><span class="p">(</span><span class="n">optional</span><span class="o">=</span><span class="k">True</span><span class="p">,</span> <span class="n">xmltagname</span><span class="o">=</span><span class="s">&#39;County&#39;</span><span class="p">)</span>
    <span class="n">region</span> <span class="o">=</span> <span class="n">Unicode</span><span class="o">.</span><span class="n">T</span><span class="p">(</span><span class="n">optional</span><span class="o">=</span><span class="k">True</span><span class="p">,</span> <span class="n">xmltagname</span><span class="o">=</span><span class="s">&#39;Region&#39;</span><span class="p">)</span>
    <span class="n">country</span> <span class="o">=</span> <span class="n">Unicode</span><span class="o">.</span><span class="n">T</span><span class="p">(</span><span class="n">optional</span><span class="o">=</span><span class="k">True</span><span class="p">,</span> <span class="n">xmltagname</span><span class="o">=</span><span class="s">&#39;Country&#39;</span><span class="p">)</span></div>


<div class="viewcode-block" id="ExternalReference"><a class="viewcode-back" href="../../../library/reference/fdsn.html#pyrocko.fdsn.station.ExternalReference">[docs]</a><span class="k">class</span> <span class="nc">ExternalReference</span><span class="p">(</span><span class="n">Object</span><span class="p">):</span>
    <span class="sd">&#39;&#39;&#39;This type contains a URI and description for external data that</span>
<span class="sd">    users may want to reference in StationXML.&#39;&#39;&#39;</span>

    <span class="n">uri</span> <span class="o">=</span> <span class="n">String</span><span class="o">.</span><span class="n">T</span><span class="p">(</span><span class="n">xmltagname</span><span class="o">=</span><span class="s">&#39;URI&#39;</span><span class="p">)</span>
    <span class="n">description</span> <span class="o">=</span> <span class="n">Unicode</span><span class="o">.</span><span class="n">T</span><span class="p">(</span><span class="n">xmltagname</span><span class="o">=</span><span class="s">&#39;Description&#39;</span><span class="p">)</span></div>


<div class="viewcode-block" id="Units"><a class="viewcode-back" href="../../../library/reference/fdsn.html#pyrocko.fdsn.station.Units">[docs]</a><span class="k">class</span> <span class="nc">Units</span><span class="p">(</span><span class="n">Object</span><span class="p">):</span>
    <span class="sd">&#39;&#39;&#39;A type to document units. Corresponds to SEED blockette 34.&#39;&#39;&#39;</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="k">None</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="n">Object</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="n">name</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>

    <span class="n">name</span> <span class="o">=</span> <span class="n">String</span><span class="o">.</span><span class="n">T</span><span class="p">(</span><span class="n">xmltagname</span><span class="o">=</span><span class="s">&#39;Name&#39;</span><span class="p">)</span>
    <span class="n">description</span> <span class="o">=</span> <span class="n">Unicode</span><span class="o">.</span><span class="n">T</span><span class="p">(</span><span class="n">optional</span><span class="o">=</span><span class="k">True</span><span class="p">,</span> <span class="n">xmltagname</span><span class="o">=</span><span class="s">&#39;Description&#39;</span><span class="p">)</span></div>


<div class="viewcode-block" id="Counter"><a class="viewcode-back" href="../../../library/reference/fdsn.html#pyrocko.fdsn.station.Counter">[docs]</a><span class="k">class</span> <span class="nc">Counter</span><span class="p">(</span><span class="n">Int</span><span class="p">):</span>
    <span class="k">pass</span></div>


<div class="viewcode-block" id="SampleRateRatio"><a class="viewcode-back" href="../../../library/reference/fdsn.html#pyrocko.fdsn.station.SampleRateRatio">[docs]</a><span class="k">class</span> <span class="nc">SampleRateRatio</span><span class="p">(</span><span class="n">Object</span><span class="p">):</span>
    <span class="sd">&#39;&#39;&#39;Sample rate expressed as number of samples in a number of</span>
<span class="sd">    seconds.&#39;&#39;&#39;</span>

    <span class="n">number_samples</span> <span class="o">=</span> <span class="n">Int</span><span class="o">.</span><span class="n">T</span><span class="p">(</span><span class="n">xmltagname</span><span class="o">=</span><span class="s">&#39;NumberSamples&#39;</span><span class="p">)</span>
    <span class="n">number_seconds</span> <span class="o">=</span> <span class="n">Int</span><span class="o">.</span><span class="n">T</span><span class="p">(</span><span class="n">xmltagname</span><span class="o">=</span><span class="s">&#39;NumberSeconds&#39;</span><span class="p">)</span></div>


<div class="viewcode-block" id="Gain"><a class="viewcode-back" href="../../../library/reference/fdsn.html#pyrocko.fdsn.station.Gain">[docs]</a><span class="k">class</span> <span class="nc">Gain</span><span class="p">(</span><span class="n">Object</span><span class="p">):</span>
    <span class="sd">&#39;&#39;&#39;Complex type for sensitivity and frequency ranges. This complex</span>
<span class="sd">    type can be used to represent both overall sensitivities and</span>
<span class="sd">    individual stage gains. The FrequencyRangeGroup is an optional</span>
<span class="sd">    construct that defines a pass band in Hertz ( FrequencyStart and</span>
<span class="sd">    FrequencyEnd) in which the SensitivityValue is valid within the</span>
<span class="sd">    number of decibels specified in FrequencyDBVariation.&#39;&#39;&#39;</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="o">=</span><span class="k">None</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="n">Object</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="o">=</span><span class="n">value</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>

    <span class="n">value</span> <span class="o">=</span> <span class="n">Float</span><span class="o">.</span><span class="n">T</span><span class="p">(</span><span class="n">optional</span><span class="o">=</span><span class="k">True</span><span class="p">,</span> <span class="n">xmltagname</span><span class="o">=</span><span class="s">&#39;Value&#39;</span><span class="p">)</span>
    <span class="n">frequency</span> <span class="o">=</span> <span class="n">Float</span><span class="o">.</span><span class="n">T</span><span class="p">(</span><span class="n">optional</span><span class="o">=</span><span class="k">True</span><span class="p">,</span> <span class="n">xmltagname</span><span class="o">=</span><span class="s">&#39;Frequency&#39;</span><span class="p">)</span></div>


<div class="viewcode-block" id="NumeratorCoefficient"><a class="viewcode-back" href="../../../library/reference/fdsn.html#pyrocko.fdsn.station.NumeratorCoefficient">[docs]</a><span class="k">class</span> <span class="nc">NumeratorCoefficient</span><span class="p">(</span><span class="n">Object</span><span class="p">):</span>
    <span class="n">i</span> <span class="o">=</span> <span class="n">Int</span><span class="o">.</span><span class="n">T</span><span class="p">(</span><span class="n">optional</span><span class="o">=</span><span class="k">True</span><span class="p">,</span> <span class="n">xmlstyle</span><span class="o">=</span><span class="s">&#39;attribute&#39;</span><span class="p">)</span>
    <span class="n">value</span> <span class="o">=</span> <span class="n">Float</span><span class="o">.</span><span class="n">T</span><span class="p">(</span><span class="n">xmlstyle</span><span class="o">=</span><span class="s">&#39;content&#39;</span><span class="p">)</span></div>


<div class="viewcode-block" id="FloatNoUnit"><a class="viewcode-back" href="../../../library/reference/fdsn.html#pyrocko.fdsn.station.FloatNoUnit">[docs]</a><span class="k">class</span> <span class="nc">FloatNoUnit</span><span class="p">(</span><span class="n">Object</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="o">=</span><span class="k">None</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="n">Object</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="o">=</span><span class="n">value</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>

    <span class="n">plus_error</span> <span class="o">=</span> <span class="n">Float</span><span class="o">.</span><span class="n">T</span><span class="p">(</span><span class="n">optional</span><span class="o">=</span><span class="k">True</span><span class="p">,</span> <span class="n">xmlstyle</span><span class="o">=</span><span class="s">&#39;attribute&#39;</span><span class="p">)</span>
    <span class="n">minus_error</span> <span class="o">=</span> <span class="n">Float</span><span class="o">.</span><span class="n">T</span><span class="p">(</span><span class="n">optional</span><span class="o">=</span><span class="k">True</span><span class="p">,</span> <span class="n">xmlstyle</span><span class="o">=</span><span class="s">&#39;attribute&#39;</span><span class="p">)</span>
    <span class="n">value</span> <span class="o">=</span> <span class="n">Float</span><span class="o">.</span><span class="n">T</span><span class="p">(</span><span class="n">xmlstyle</span><span class="o">=</span><span class="s">&#39;content&#39;</span><span class="p">)</span></div>


<div class="viewcode-block" id="FloatWithUnit"><a class="viewcode-back" href="../../../library/reference/fdsn.html#pyrocko.fdsn.station.FloatWithUnit">[docs]</a><span class="k">class</span> <span class="nc">FloatWithUnit</span><span class="p">(</span><span class="n">FloatNoUnit</span><span class="p">):</span>
    <span class="n">unit</span> <span class="o">=</span> <span class="n">String</span><span class="o">.</span><span class="n">T</span><span class="p">(</span><span class="n">optional</span><span class="o">=</span><span class="k">True</span><span class="p">,</span> <span class="n">xmlstyle</span><span class="o">=</span><span class="s">&#39;attribute&#39;</span><span class="p">)</span></div>


<div class="viewcode-block" id="Equipment"><a class="viewcode-back" href="../../../library/reference/fdsn.html#pyrocko.fdsn.station.Equipment">[docs]</a><span class="k">class</span> <span class="nc">Equipment</span><span class="p">(</span><span class="n">Object</span><span class="p">):</span>
    <span class="n">resource_id</span> <span class="o">=</span> <span class="n">String</span><span class="o">.</span><span class="n">T</span><span class="p">(</span><span class="n">optional</span><span class="o">=</span><span class="k">True</span><span class="p">,</span> <span class="n">xmlstyle</span><span class="o">=</span><span class="s">&#39;attribute&#39;</span><span class="p">)</span>
    <span class="nb">type</span> <span class="o">=</span> <span class="n">String</span><span class="o">.</span><span class="n">T</span><span class="p">(</span><span class="n">optional</span><span class="o">=</span><span class="k">True</span><span class="p">,</span> <span class="n">xmltagname</span><span class="o">=</span><span class="s">&#39;Type&#39;</span><span class="p">)</span>
    <span class="n">description</span> <span class="o">=</span> <span class="n">Unicode</span><span class="o">.</span><span class="n">T</span><span class="p">(</span><span class="n">optional</span><span class="o">=</span><span class="k">True</span><span class="p">,</span> <span class="n">xmltagname</span><span class="o">=</span><span class="s">&#39;Description&#39;</span><span class="p">)</span>
    <span class="n">manufacturer</span> <span class="o">=</span> <span class="n">Unicode</span><span class="o">.</span><span class="n">T</span><span class="p">(</span><span class="n">optional</span><span class="o">=</span><span class="k">True</span><span class="p">,</span> <span class="n">xmltagname</span><span class="o">=</span><span class="s">&#39;Manufacturer&#39;</span><span class="p">)</span>
    <span class="n">vendor</span> <span class="o">=</span> <span class="n">Unicode</span><span class="o">.</span><span class="n">T</span><span class="p">(</span><span class="n">optional</span><span class="o">=</span><span class="k">True</span><span class="p">,</span> <span class="n">xmltagname</span><span class="o">=</span><span class="s">&#39;Vendor&#39;</span><span class="p">)</span>
    <span class="n">model</span> <span class="o">=</span> <span class="n">Unicode</span><span class="o">.</span><span class="n">T</span><span class="p">(</span><span class="n">optional</span><span class="o">=</span><span class="k">True</span><span class="p">,</span> <span class="n">xmltagname</span><span class="o">=</span><span class="s">&#39;Model&#39;</span><span class="p">)</span>
    <span class="n">serial_number</span> <span class="o">=</span> <span class="n">String</span><span class="o">.</span><span class="n">T</span><span class="p">(</span><span class="n">optional</span><span class="o">=</span><span class="k">True</span><span class="p">,</span> <span class="n">xmltagname</span><span class="o">=</span><span class="s">&#39;SerialNumber&#39;</span><span class="p">)</span>
    <span class="n">installation_date</span> <span class="o">=</span> <span class="n">DummyAwareOptionalTimestamp</span><span class="o">.</span><span class="n">T</span><span class="p">(</span>
        <span class="n">optional</span><span class="o">=</span><span class="k">True</span><span class="p">,</span>
        <span class="n">xmltagname</span><span class="o">=</span><span class="s">&#39;InstallationDate&#39;</span><span class="p">)</span>
    <span class="n">removal_date</span> <span class="o">=</span> <span class="n">DummyAwareOptionalTimestamp</span><span class="o">.</span><span class="n">T</span><span class="p">(</span>
        <span class="n">optional</span><span class="o">=</span><span class="k">True</span><span class="p">,</span>
        <span class="n">xmltagname</span><span class="o">=</span><span class="s">&#39;RemovalDate&#39;</span><span class="p">)</span>
    <span class="n">calibration_date_list</span> <span class="o">=</span> <span class="n">List</span><span class="o">.</span><span class="n">T</span><span class="p">(</span><span class="n">Timestamp</span><span class="o">.</span><span class="n">T</span><span class="p">(</span><span class="n">xmltagname</span><span class="o">=</span><span class="s">&#39;CalibrationDate&#39;</span><span class="p">))</span></div>


<div class="viewcode-block" id="PhoneNumber"><a class="viewcode-back" href="../../../library/reference/fdsn.html#pyrocko.fdsn.station.PhoneNumber">[docs]</a><span class="k">class</span> <span class="nc">PhoneNumber</span><span class="p">(</span><span class="n">Object</span><span class="p">):</span>
    <span class="n">description</span> <span class="o">=</span> <span class="n">Unicode</span><span class="o">.</span><span class="n">T</span><span class="p">(</span><span class="n">optional</span><span class="o">=</span><span class="k">True</span><span class="p">,</span> <span class="n">xmlstyle</span><span class="o">=</span><span class="s">&#39;attribute&#39;</span><span class="p">)</span>
    <span class="n">country_code</span> <span class="o">=</span> <span class="n">Int</span><span class="o">.</span><span class="n">T</span><span class="p">(</span><span class="n">optional</span><span class="o">=</span><span class="k">True</span><span class="p">,</span> <span class="n">xmltagname</span><span class="o">=</span><span class="s">&#39;CountryCode&#39;</span><span class="p">)</span>
    <span class="n">area_code</span> <span class="o">=</span> <span class="n">Int</span><span class="o">.</span><span class="n">T</span><span class="p">(</span><span class="n">xmltagname</span><span class="o">=</span><span class="s">&#39;AreaCode&#39;</span><span class="p">)</span>
    <span class="n">phone_number</span> <span class="o">=</span> <span class="n">PhoneNumber</span><span class="o">.</span><span class="n">T</span><span class="p">(</span><span class="n">xmltagname</span><span class="o">=</span><span class="s">&#39;PhoneNumber&#39;</span><span class="p">)</span></div>


<div class="viewcode-block" id="BaseFilter"><a class="viewcode-back" href="../../../library/reference/fdsn.html#pyrocko.fdsn.station.BaseFilter">[docs]</a><span class="k">class</span> <span class="nc">BaseFilter</span><span class="p">(</span><span class="n">Object</span><span class="p">):</span>
    <span class="sd">&#39;&#39;&#39;The BaseFilter is derived by all filters.&#39;&#39;&#39;</span>

    <span class="n">resource_id</span> <span class="o">=</span> <span class="n">String</span><span class="o">.</span><span class="n">T</span><span class="p">(</span><span class="n">optional</span><span class="o">=</span><span class="k">True</span><span class="p">,</span> <span class="n">xmlstyle</span><span class="o">=</span><span class="s">&#39;attribute&#39;</span><span class="p">)</span>
    <span class="n">name</span> <span class="o">=</span> <span class="n">String</span><span class="o">.</span><span class="n">T</span><span class="p">(</span><span class="n">optional</span><span class="o">=</span><span class="k">True</span><span class="p">,</span> <span class="n">xmlstyle</span><span class="o">=</span><span class="s">&#39;attribute&#39;</span><span class="p">)</span>
    <span class="n">description</span> <span class="o">=</span> <span class="n">Unicode</span><span class="o">.</span><span class="n">T</span><span class="p">(</span><span class="n">optional</span><span class="o">=</span><span class="k">True</span><span class="p">,</span> <span class="n">xmltagname</span><span class="o">=</span><span class="s">&#39;Description&#39;</span><span class="p">)</span>
    <span class="n">input_units</span> <span class="o">=</span> <span class="n">Units</span><span class="o">.</span><span class="n">T</span><span class="p">(</span><span class="n">optional</span><span class="o">=</span><span class="k">True</span><span class="p">,</span> <span class="n">xmltagname</span><span class="o">=</span><span class="s">&#39;InputUnits&#39;</span><span class="p">)</span>
    <span class="n">output_units</span> <span class="o">=</span> <span class="n">Units</span><span class="o">.</span><span class="n">T</span><span class="p">(</span><span class="n">optional</span><span class="o">=</span><span class="k">True</span><span class="p">,</span> <span class="n">xmltagname</span><span class="o">=</span><span class="s">&#39;OutputUnits&#39;</span><span class="p">)</span></div>


<div class="viewcode-block" id="Sensitivity"><a class="viewcode-back" href="../../../library/reference/fdsn.html#pyrocko.fdsn.station.Sensitivity">[docs]</a><span class="k">class</span> <span class="nc">Sensitivity</span><span class="p">(</span><span class="n">Gain</span><span class="p">):</span>
    <span class="sd">&#39;&#39;&#39;Sensitivity and frequency ranges. The FrequencyRangeGroup is an</span>
<span class="sd">    optional construct that defines a pass band in Hertz</span>
<span class="sd">    (FrequencyStart and FrequencyEnd) in which the SensitivityValue is</span>
<span class="sd">    valid within the number of decibels specified in</span>
<span class="sd">    FrequencyDBVariation.&#39;&#39;&#39;</span>

    <span class="n">input_units</span> <span class="o">=</span> <span class="n">Units</span><span class="o">.</span><span class="n">T</span><span class="p">(</span><span class="n">optional</span><span class="o">=</span><span class="k">True</span><span class="p">,</span> <span class="n">xmltagname</span><span class="o">=</span><span class="s">&#39;InputUnits&#39;</span><span class="p">)</span>
    <span class="n">output_units</span> <span class="o">=</span> <span class="n">Units</span><span class="o">.</span><span class="n">T</span><span class="p">(</span><span class="n">optional</span><span class="o">=</span><span class="k">True</span><span class="p">,</span> <span class="n">xmltagname</span><span class="o">=</span><span class="s">&#39;OutputUnits&#39;</span><span class="p">)</span>
    <span class="n">frequency_start</span> <span class="o">=</span> <span class="n">Float</span><span class="o">.</span><span class="n">T</span><span class="p">(</span><span class="n">optional</span><span class="o">=</span><span class="k">True</span><span class="p">,</span> <span class="n">xmltagname</span><span class="o">=</span><span class="s">&#39;FrequencyStart&#39;</span><span class="p">)</span>
    <span class="n">frequency_end</span> <span class="o">=</span> <span class="n">Float</span><span class="o">.</span><span class="n">T</span><span class="p">(</span><span class="n">optional</span><span class="o">=</span><span class="k">True</span><span class="p">,</span> <span class="n">xmltagname</span><span class="o">=</span><span class="s">&#39;FrequencyEnd&#39;</span><span class="p">)</span>
    <span class="n">frequency_db_variation</span> <span class="o">=</span> <span class="n">Float</span><span class="o">.</span><span class="n">T</span><span class="p">(</span><span class="n">optional</span><span class="o">=</span><span class="k">True</span><span class="p">,</span>
                                     <span class="n">xmltagname</span><span class="o">=</span><span class="s">&#39;FrequencyDBVariation&#39;</span><span class="p">)</span></div>


<div class="viewcode-block" id="Coefficient"><a class="viewcode-back" href="../../../library/reference/fdsn.html#pyrocko.fdsn.station.Coefficient">[docs]</a><span class="k">class</span> <span class="nc">Coefficient</span><span class="p">(</span><span class="n">FloatNoUnit</span><span class="p">):</span>
    <span class="n">number</span> <span class="o">=</span> <span class="n">Counter</span><span class="o">.</span><span class="n">T</span><span class="p">(</span><span class="n">optional</span><span class="o">=</span><span class="k">True</span><span class="p">,</span> <span class="n">xmlstyle</span><span class="o">=</span><span class="s">&#39;attribute&#39;</span><span class="p">)</span></div>


<div class="viewcode-block" id="PoleZero"><a class="viewcode-back" href="../../../library/reference/fdsn.html#pyrocko.fdsn.station.PoleZero">[docs]</a><span class="k">class</span> <span class="nc">PoleZero</span><span class="p">(</span><span class="n">Object</span><span class="p">):</span>
    <span class="sd">&#39;&#39;&#39;Complex numbers used as poles or zeros in channel response.&#39;&#39;&#39;</span>

    <span class="n">number</span> <span class="o">=</span> <span class="n">Int</span><span class="o">.</span><span class="n">T</span><span class="p">(</span><span class="n">optional</span><span class="o">=</span><span class="k">True</span><span class="p">,</span> <span class="n">xmlstyle</span><span class="o">=</span><span class="s">&#39;attribute&#39;</span><span class="p">)</span>
    <span class="n">real</span> <span class="o">=</span> <span class="n">FloatNoUnit</span><span class="o">.</span><span class="n">T</span><span class="p">(</span><span class="n">xmltagname</span><span class="o">=</span><span class="s">&#39;Real&#39;</span><span class="p">)</span>
    <span class="n">imaginary</span> <span class="o">=</span> <span class="n">FloatNoUnit</span><span class="o">.</span><span class="n">T</span><span class="p">(</span><span class="n">xmltagname</span><span class="o">=</span><span class="s">&#39;Imaginary&#39;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">value</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">real</span><span class="o">.</span><span class="n">value</span> <span class="o">+</span> <span class="mi">1</span><span class="n">J</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">imaginary</span><span class="o">.</span><span class="n">value</span></div>


<div class="viewcode-block" id="ClockDrift"><a class="viewcode-back" href="../../../library/reference/fdsn.html#pyrocko.fdsn.station.ClockDrift">[docs]</a><span class="k">class</span> <span class="nc">ClockDrift</span><span class="p">(</span><span class="n">FloatWithUnit</span><span class="p">):</span>
    <span class="n">unit</span> <span class="o">=</span> <span class="n">String</span><span class="o">.</span><span class="n">T</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="s">&#39;SECONDS/SAMPLE&#39;</span><span class="p">,</span> <span class="n">optional</span><span class="o">=</span><span class="k">True</span><span class="p">,</span>
                    <span class="n">xmlstyle</span><span class="o">=</span><span class="s">&#39;attribute&#39;</span><span class="p">)</span>  <span class="c"># fixed</span></div>


<div class="viewcode-block" id="Second"><a class="viewcode-back" href="../../../library/reference/fdsn.html#pyrocko.fdsn.station.Second">[docs]</a><span class="k">class</span> <span class="nc">Second</span><span class="p">(</span><span class="n">FloatWithUnit</span><span class="p">):</span>
    <span class="sd">&#39;&#39;&#39;A time value in seconds.&#39;&#39;&#39;</span>

    <span class="n">unit</span> <span class="o">=</span> <span class="n">String</span><span class="o">.</span><span class="n">T</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="s">&#39;SECONDS&#39;</span><span class="p">,</span> <span class="n">optional</span><span class="o">=</span><span class="k">True</span><span class="p">,</span> <span class="n">xmlstyle</span><span class="o">=</span><span class="s">&#39;attribute&#39;</span><span class="p">)</span></div>
    <span class="c"># fixed unit</span>


<div class="viewcode-block" id="Voltage"><a class="viewcode-back" href="../../../library/reference/fdsn.html#pyrocko.fdsn.station.Voltage">[docs]</a><span class="k">class</span> <span class="nc">Voltage</span><span class="p">(</span><span class="n">FloatWithUnit</span><span class="p">):</span>
    <span class="n">unit</span> <span class="o">=</span> <span class="n">String</span><span class="o">.</span><span class="n">T</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="s">&#39;VOLTS&#39;</span><span class="p">,</span> <span class="n">optional</span><span class="o">=</span><span class="k">True</span><span class="p">,</span> <span class="n">xmlstyle</span><span class="o">=</span><span class="s">&#39;attribute&#39;</span><span class="p">)</span></div>
    <span class="c"># fixed unit</span>


<div class="viewcode-block" id="Angle"><a class="viewcode-back" href="../../../library/reference/fdsn.html#pyrocko.fdsn.station.Angle">[docs]</a><span class="k">class</span> <span class="nc">Angle</span><span class="p">(</span><span class="n">FloatWithUnit</span><span class="p">):</span>
    <span class="n">unit</span> <span class="o">=</span> <span class="n">String</span><span class="o">.</span><span class="n">T</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="s">&#39;DEGREES&#39;</span><span class="p">,</span> <span class="n">optional</span><span class="o">=</span><span class="k">True</span><span class="p">,</span> <span class="n">xmlstyle</span><span class="o">=</span><span class="s">&#39;attribute&#39;</span><span class="p">)</span></div>
    <span class="c"># fixed unit</span>


<div class="viewcode-block" id="Azimuth"><a class="viewcode-back" href="../../../library/reference/fdsn.html#pyrocko.fdsn.station.Azimuth">[docs]</a><span class="k">class</span> <span class="nc">Azimuth</span><span class="p">(</span><span class="n">FloatWithUnit</span><span class="p">):</span>
    <span class="sd">&#39;&#39;&#39;Instrument azimuth, degrees clockwise from North.&#39;&#39;&#39;</span>

    <span class="n">unit</span> <span class="o">=</span> <span class="n">String</span><span class="o">.</span><span class="n">T</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="s">&#39;DEGREES&#39;</span><span class="p">,</span> <span class="n">optional</span><span class="o">=</span><span class="k">True</span><span class="p">,</span> <span class="n">xmlstyle</span><span class="o">=</span><span class="s">&#39;attribute&#39;</span><span class="p">)</span></div>
    <span class="c"># fixed unit</span>


<div class="viewcode-block" id="Dip"><a class="viewcode-back" href="../../../library/reference/fdsn.html#pyrocko.fdsn.station.Dip">[docs]</a><span class="k">class</span> <span class="nc">Dip</span><span class="p">(</span><span class="n">FloatWithUnit</span><span class="p">):</span>
    <span class="sd">&#39;&#39;&#39;Instrument dip in degrees down from horizontal. Together</span>
<span class="sd">    azimuth and dip describe the direction of the sensitive axis of</span>
<span class="sd">    the instrument.&#39;&#39;&#39;</span>

    <span class="n">unit</span> <span class="o">=</span> <span class="n">String</span><span class="o">.</span><span class="n">T</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="s">&#39;DEGREES&#39;</span><span class="p">,</span> <span class="n">optional</span><span class="o">=</span><span class="k">True</span><span class="p">,</span> <span class="n">xmlstyle</span><span class="o">=</span><span class="s">&#39;attribute&#39;</span><span class="p">)</span></div>
    <span class="c"># fixed unit</span>


<div class="viewcode-block" id="Distance"><a class="viewcode-back" href="../../../library/reference/fdsn.html#pyrocko.fdsn.station.Distance">[docs]</a><span class="k">class</span> <span class="nc">Distance</span><span class="p">(</span><span class="n">FloatWithUnit</span><span class="p">):</span>
    <span class="sd">&#39;&#39;&#39;Extension of FloatWithUnit for distances, elevations, and depths.&#39;&#39;&#39;</span>

    <span class="n">unit</span> <span class="o">=</span> <span class="n">String</span><span class="o">.</span><span class="n">T</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="s">&#39;METERS&#39;</span><span class="p">,</span> <span class="n">optional</span><span class="o">=</span><span class="k">True</span><span class="p">,</span> <span class="n">xmlstyle</span><span class="o">=</span><span class="s">&#39;attribute&#39;</span><span class="p">)</span></div>
    <span class="c"># NOT fixed unit!</span>


<div class="viewcode-block" id="Frequency"><a class="viewcode-back" href="../../../library/reference/fdsn.html#pyrocko.fdsn.station.Frequency">[docs]</a><span class="k">class</span> <span class="nc">Frequency</span><span class="p">(</span><span class="n">FloatWithUnit</span><span class="p">):</span>
    <span class="n">unit</span> <span class="o">=</span> <span class="n">String</span><span class="o">.</span><span class="n">T</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="s">&#39;HERTZ&#39;</span><span class="p">,</span> <span class="n">optional</span><span class="o">=</span><span class="k">True</span><span class="p">,</span> <span class="n">xmlstyle</span><span class="o">=</span><span class="s">&#39;attribute&#39;</span><span class="p">)</span></div>
    <span class="c"># fixed unit</span>


<div class="viewcode-block" id="SampleRate"><a class="viewcode-back" href="../../../library/reference/fdsn.html#pyrocko.fdsn.station.SampleRate">[docs]</a><span class="k">class</span> <span class="nc">SampleRate</span><span class="p">(</span><span class="n">FloatWithUnit</span><span class="p">):</span>
    <span class="sd">&#39;&#39;&#39;Sample rate in samples per second.&#39;&#39;&#39;</span>

    <span class="n">unit</span> <span class="o">=</span> <span class="n">String</span><span class="o">.</span><span class="n">T</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="s">&#39;SAMPLES/S&#39;</span><span class="p">,</span> <span class="n">optional</span><span class="o">=</span><span class="k">True</span><span class="p">,</span> <span class="n">xmlstyle</span><span class="o">=</span><span class="s">&#39;attribute&#39;</span><span class="p">)</span></div>
    <span class="c"># fixed unit</span>


<div class="viewcode-block" id="Person"><a class="viewcode-back" href="../../../library/reference/fdsn.html#pyrocko.fdsn.station.Person">[docs]</a><span class="k">class</span> <span class="nc">Person</span><span class="p">(</span><span class="n">Object</span><span class="p">):</span>
    <span class="sd">&#39;&#39;&#39;Representation of a person&#39;s contact information. A person can</span>
<span class="sd">    belong to multiple agencies and have multiple email addresses and</span>
<span class="sd">    phone numbers.&#39;&#39;&#39;</span>

    <span class="n">name_list</span> <span class="o">=</span> <span class="n">List</span><span class="o">.</span><span class="n">T</span><span class="p">(</span><span class="n">Unicode</span><span class="o">.</span><span class="n">T</span><span class="p">(</span><span class="n">xmltagname</span><span class="o">=</span><span class="s">&#39;Name&#39;</span><span class="p">))</span>
    <span class="n">agency_list</span> <span class="o">=</span> <span class="n">List</span><span class="o">.</span><span class="n">T</span><span class="p">(</span><span class="n">Unicode</span><span class="o">.</span><span class="n">T</span><span class="p">(</span><span class="n">xmltagname</span><span class="o">=</span><span class="s">&#39;Agency&#39;</span><span class="p">))</span>
    <span class="n">email_list</span> <span class="o">=</span> <span class="n">List</span><span class="o">.</span><span class="n">T</span><span class="p">(</span><span class="n">Email</span><span class="o">.</span><span class="n">T</span><span class="p">(</span><span class="n">xmltagname</span><span class="o">=</span><span class="s">&#39;Email&#39;</span><span class="p">))</span>
    <span class="n">phone_list</span> <span class="o">=</span> <span class="n">List</span><span class="o">.</span><span class="n">T</span><span class="p">(</span><span class="n">PhoneNumber</span><span class="o">.</span><span class="n">T</span><span class="p">(</span><span class="n">xmltagname</span><span class="o">=</span><span class="s">&#39;Phone&#39;</span><span class="p">))</span></div>


<div class="viewcode-block" id="FIR"><a class="viewcode-back" href="../../../library/reference/fdsn.html#pyrocko.fdsn.station.FIR">[docs]</a><span class="k">class</span> <span class="nc">FIR</span><span class="p">(</span><span class="n">BaseFilter</span><span class="p">):</span>
    <span class="sd">&#39;&#39;&#39;Response: FIR filter. Corresponds to SEED blockette 61. FIR</span>
<span class="sd">    filters are also commonly documented using the Coefficients</span>
<span class="sd">    element.&#39;&#39;&#39;</span>

    <span class="n">symmetry</span> <span class="o">=</span> <span class="n">Symmetry</span><span class="o">.</span><span class="n">T</span><span class="p">(</span><span class="n">xmltagname</span><span class="o">=</span><span class="s">&#39;Symmetry&#39;</span><span class="p">)</span>
    <span class="n">numerator_coefficient_list</span> <span class="o">=</span> <span class="n">List</span><span class="o">.</span><span class="n">T</span><span class="p">(</span>
        <span class="n">NumeratorCoefficient</span><span class="o">.</span><span class="n">T</span><span class="p">(</span><span class="n">xmltagname</span><span class="o">=</span><span class="s">&#39;NumeratorCoefficient&#39;</span><span class="p">))</span></div>


<div class="viewcode-block" id="Coefficients"><a class="viewcode-back" href="../../../library/reference/fdsn.html#pyrocko.fdsn.station.Coefficients">[docs]</a><span class="k">class</span> <span class="nc">Coefficients</span><span class="p">(</span><span class="n">BaseFilter</span><span class="p">):</span>
    <span class="sd">&#39;&#39;&#39;Response: coefficients for FIR filter. Laplace transforms or</span>
<span class="sd">    IIR filters can be expressed using type as well but the</span>
<span class="sd">    PolesAndZeros should be used instead. Corresponds to SEED</span>
<span class="sd">    blockette 54.&#39;&#39;&#39;</span>

    <span class="n">cf_transfer_function_type</span> <span class="o">=</span> <span class="n">CfTransferFunction</span><span class="o">.</span><span class="n">T</span><span class="p">(</span>
        <span class="n">xmltagname</span><span class="o">=</span><span class="s">&#39;CfTransferFunctionType&#39;</span><span class="p">)</span>
    <span class="n">numerator_list</span> <span class="o">=</span> <span class="n">List</span><span class="o">.</span><span class="n">T</span><span class="p">(</span><span class="n">FloatWithUnit</span><span class="o">.</span><span class="n">T</span><span class="p">(</span><span class="n">xmltagname</span><span class="o">=</span><span class="s">&#39;Numerator&#39;</span><span class="p">))</span>
    <span class="n">denominator_list</span> <span class="o">=</span> <span class="n">List</span><span class="o">.</span><span class="n">T</span><span class="p">(</span><span class="n">FloatWithUnit</span><span class="o">.</span><span class="n">T</span><span class="p">(</span><span class="n">xmltagname</span><span class="o">=</span><span class="s">&#39;Denominator&#39;</span><span class="p">))</span></div>


<div class="viewcode-block" id="Latitude"><a class="viewcode-back" href="../../../library/reference/fdsn.html#pyrocko.fdsn.station.Latitude">[docs]</a><span class="k">class</span> <span class="nc">Latitude</span><span class="p">(</span><span class="n">FloatWithUnit</span><span class="p">):</span>
    <span class="sd">&#39;&#39;&#39;Type for latitude coordinate.&#39;&#39;&#39;</span>

    <span class="n">unit</span> <span class="o">=</span> <span class="n">String</span><span class="o">.</span><span class="n">T</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="s">&#39;DEGREES&#39;</span><span class="p">,</span> <span class="n">optional</span><span class="o">=</span><span class="k">True</span><span class="p">,</span> <span class="n">xmlstyle</span><span class="o">=</span><span class="s">&#39;attribute&#39;</span><span class="p">)</span>
    <span class="c"># fixed unit</span>
    <span class="n">datum</span> <span class="o">=</span> <span class="n">String</span><span class="o">.</span><span class="n">T</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="s">&#39;WGS84&#39;</span><span class="p">,</span> <span class="n">optional</span><span class="o">=</span><span class="k">True</span><span class="p">,</span> <span class="n">xmlstyle</span><span class="o">=</span><span class="s">&#39;attribute&#39;</span><span class="p">)</span></div>


<div class="viewcode-block" id="Longitude"><a class="viewcode-back" href="../../../library/reference/fdsn.html#pyrocko.fdsn.station.Longitude">[docs]</a><span class="k">class</span> <span class="nc">Longitude</span><span class="p">(</span><span class="n">FloatWithUnit</span><span class="p">):</span>
    <span class="sd">&#39;&#39;&#39;Type for longitude coordinate.&#39;&#39;&#39;</span>

    <span class="n">unit</span> <span class="o">=</span> <span class="n">String</span><span class="o">.</span><span class="n">T</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="s">&#39;DEGREES&#39;</span><span class="p">,</span> <span class="n">optional</span><span class="o">=</span><span class="k">True</span><span class="p">,</span> <span class="n">xmlstyle</span><span class="o">=</span><span class="s">&#39;attribute&#39;</span><span class="p">)</span>
    <span class="c"># fixed unit</span>
    <span class="n">datum</span> <span class="o">=</span> <span class="n">String</span><span class="o">.</span><span class="n">T</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="s">&#39;WGS84&#39;</span><span class="p">,</span> <span class="n">optional</span><span class="o">=</span><span class="k">True</span><span class="p">,</span> <span class="n">xmlstyle</span><span class="o">=</span><span class="s">&#39;attribute&#39;</span><span class="p">)</span></div>


<div class="viewcode-block" id="PolesZeros"><a class="viewcode-back" href="../../../library/reference/fdsn.html#pyrocko.fdsn.station.PolesZeros">[docs]</a><span class="k">class</span> <span class="nc">PolesZeros</span><span class="p">(</span><span class="n">BaseFilter</span><span class="p">):</span>
    <span class="sd">&#39;&#39;&#39;Response: complex poles and zeros. Corresponds to SEED</span>
<span class="sd">    blockette 53.&#39;&#39;&#39;</span>

    <span class="n">pz_transfer_function_type</span> <span class="o">=</span> <span class="n">PzTransferFunction</span><span class="o">.</span><span class="n">T</span><span class="p">(</span>
        <span class="n">xmltagname</span><span class="o">=</span><span class="s">&#39;PzTransferFunctionType&#39;</span><span class="p">)</span>
    <span class="n">normalization_factor</span> <span class="o">=</span> <span class="n">Float</span><span class="o">.</span><span class="n">T</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="mf">1.0</span><span class="p">,</span>
                                   <span class="n">xmltagname</span><span class="o">=</span><span class="s">&#39;NormalizationFactor&#39;</span><span class="p">)</span>
    <span class="n">normalization_frequency</span> <span class="o">=</span> <span class="n">Frequency</span><span class="o">.</span><span class="n">T</span><span class="p">(</span><span class="n">xmltagname</span><span class="o">=</span><span class="s">&#39;NormalizationFrequency&#39;</span><span class="p">)</span>
    <span class="n">zero_list</span> <span class="o">=</span> <span class="n">List</span><span class="o">.</span><span class="n">T</span><span class="p">(</span><span class="n">PoleZero</span><span class="o">.</span><span class="n">T</span><span class="p">(</span><span class="n">xmltagname</span><span class="o">=</span><span class="s">&#39;Zero&#39;</span><span class="p">))</span>
    <span class="n">pole_list</span> <span class="o">=</span> <span class="n">List</span><span class="o">.</span><span class="n">T</span><span class="p">(</span><span class="n">PoleZero</span><span class="o">.</span><span class="n">T</span><span class="p">(</span><span class="n">xmltagname</span><span class="o">=</span><span class="s">&#39;Pole&#39;</span><span class="p">))</span>

    <span class="k">def</span> <span class="nf">get_pyrocko_response</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">pz_transfer_function_type</span> <span class="ow">not</span> <span class="ow">in</span> <span class="p">(</span>
                <span class="s">&#39;LAPLACE (RADIANS/SECOND)&#39;</span><span class="p">,</span>
                <span class="s">&#39;LAPLACE (HERTZ)&#39;</span><span class="p">):</span>

            <span class="k">raise</span> <span class="n">NoResponseInformation</span><span class="p">(</span>
                <span class="s">&#39;cannot convert PoleZero response of type %s&#39;</span> <span class="o">%</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">pz_transfer_function_type</span><span class="p">)</span>

        <span class="n">factor</span> <span class="o">=</span> <span class="mf">1.0</span>
        <span class="n">cfactor</span> <span class="o">=</span> <span class="mf">1.0</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">pz_transfer_function_type</span> <span class="o">==</span> <span class="s">&#39;LAPLACE (HERTZ)&#39;</span><span class="p">:</span>
            <span class="n">factor</span> <span class="o">=</span> <span class="mf">2.</span> <span class="o">*</span> <span class="n">math</span><span class="o">.</span><span class="n">pi</span>
            <span class="n">cfactor</span> <span class="o">=</span> <span class="p">(</span><span class="mf">2.</span> <span class="o">*</span> <span class="n">math</span><span class="o">.</span><span class="n">pi</span><span class="p">)</span><span class="o">**</span><span class="p">(</span>
                <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">pole_list</span><span class="p">)</span> <span class="o">-</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">zero_list</span><span class="p">))</span>

        <span class="n">resp</span> <span class="o">=</span> <span class="n">trace</span><span class="o">.</span><span class="n">PoleZeroResponse</span><span class="p">(</span>
            <span class="n">constant</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">normalization_factor</span><span class="o">*</span><span class="n">cfactor</span><span class="p">,</span>
            <span class="n">zeros</span><span class="o">=</span><span class="p">[</span><span class="n">z</span><span class="o">.</span><span class="n">value</span><span class="p">()</span><span class="o">*</span><span class="n">factor</span> <span class="k">for</span> <span class="n">z</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">zero_list</span><span class="p">],</span>
            <span class="n">poles</span><span class="o">=</span><span class="p">[</span><span class="n">p</span><span class="o">.</span><span class="n">value</span><span class="p">()</span><span class="o">*</span><span class="n">factor</span> <span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">pole_list</span><span class="p">])</span>

        <span class="n">computed_normalization_factor</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">normalization_factor</span> <span class="o">/</span> <span class="nb">abs</span><span class="p">(</span>
            <span class="n">resp</span><span class="o">.</span><span class="n">evaluate</span><span class="p">(</span><span class="n">num</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="bp">self</span><span class="o">.</span><span class="n">normalization_frequency</span><span class="o">.</span><span class="n">value</span><span class="p">]))[</span><span class="mi">0</span><span class="p">])</span>

        <span class="n">perc</span> <span class="o">=</span> <span class="nb">abs</span><span class="p">(</span><span class="n">computed_normalization_factor</span> <span class="o">/</span>
                   <span class="bp">self</span><span class="o">.</span><span class="n">normalization_factor</span> <span class="o">-</span> <span class="mf">1.0</span><span class="p">)</span> <span class="o">*</span> <span class="mi">100</span>

        <span class="k">if</span> <span class="n">perc</span> <span class="o">&gt;</span> <span class="mf">2.0</span><span class="p">:</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">warn</span><span class="p">(</span>
                <span class="s">&#39;computed and reported normalization factors differ by &#39;</span>
                <span class="s">&#39;%.1f%%: computed: %g, reported: %g&#39;</span> <span class="o">%</span> <span class="p">(</span>
                    <span class="n">perc</span><span class="p">,</span>
                    <span class="n">computed_normalization_factor</span><span class="p">,</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">normalization_factor</span><span class="p">))</span>

        <span class="k">return</span> <span class="n">resp</span></div>


<div class="viewcode-block" id="ResponseListElement"><a class="viewcode-back" href="../../../library/reference/fdsn.html#pyrocko.fdsn.station.ResponseListElement">[docs]</a><span class="k">class</span> <span class="nc">ResponseListElement</span><span class="p">(</span><span class="n">Object</span><span class="p">):</span>
    <span class="n">frequency</span> <span class="o">=</span> <span class="n">Frequency</span><span class="o">.</span><span class="n">T</span><span class="p">(</span><span class="n">xmltagname</span><span class="o">=</span><span class="s">&#39;Frequency&#39;</span><span class="p">)</span>
    <span class="n">amplitude</span> <span class="o">=</span> <span class="n">FloatWithUnit</span><span class="o">.</span><span class="n">T</span><span class="p">(</span><span class="n">xmltagname</span><span class="o">=</span><span class="s">&#39;Amplitude&#39;</span><span class="p">)</span>
    <span class="n">phase</span> <span class="o">=</span> <span class="n">Angle</span><span class="o">.</span><span class="n">T</span><span class="p">(</span><span class="n">xmltagname</span><span class="o">=</span><span class="s">&#39;Phase&#39;</span><span class="p">)</span></div>


<div class="viewcode-block" id="Polynomial"><a class="viewcode-back" href="../../../library/reference/fdsn.html#pyrocko.fdsn.station.Polynomial">[docs]</a><span class="k">class</span> <span class="nc">Polynomial</span><span class="p">(</span><span class="n">BaseFilter</span><span class="p">):</span>
    <span class="sd">&#39;&#39;&#39;Response: expressed as a polynomial (allows non-linear sensors</span>
<span class="sd">    to be described). Corresponds to SEED blockette 62. Can be used to</span>
<span class="sd">    describe a stage of acquisition or a complete system.&#39;&#39;&#39;</span>

    <span class="n">approximation_type</span> <span class="o">=</span> <span class="n">Approximation</span><span class="o">.</span><span class="n">T</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="s">&#39;MACLAURIN&#39;</span><span class="p">,</span>
                                         <span class="n">xmltagname</span><span class="o">=</span><span class="s">&#39;ApproximationType&#39;</span><span class="p">)</span>
    <span class="n">frequency_lower_bound</span> <span class="o">=</span> <span class="n">Frequency</span><span class="o">.</span><span class="n">T</span><span class="p">(</span><span class="n">xmltagname</span><span class="o">=</span><span class="s">&#39;FrequencyLowerBound&#39;</span><span class="p">)</span>
    <span class="n">frequency_upper_bound</span> <span class="o">=</span> <span class="n">Frequency</span><span class="o">.</span><span class="n">T</span><span class="p">(</span><span class="n">xmltagname</span><span class="o">=</span><span class="s">&#39;FrequencyUpperBound&#39;</span><span class="p">)</span>
    <span class="n">approximation_lower_bound</span> <span class="o">=</span> <span class="n">Float</span><span class="o">.</span><span class="n">T</span><span class="p">(</span><span class="n">xmltagname</span><span class="o">=</span><span class="s">&#39;ApproximationLowerBound&#39;</span><span class="p">)</span>
    <span class="n">approximation_upper_bound</span> <span class="o">=</span> <span class="n">Float</span><span class="o">.</span><span class="n">T</span><span class="p">(</span><span class="n">xmltagname</span><span class="o">=</span><span class="s">&#39;ApproximationUpperBound&#39;</span><span class="p">)</span>
    <span class="n">maximum_error</span> <span class="o">=</span> <span class="n">Float</span><span class="o">.</span><span class="n">T</span><span class="p">(</span><span class="n">xmltagname</span><span class="o">=</span><span class="s">&#39;MaximumError&#39;</span><span class="p">)</span>
    <span class="n">coefficient_list</span> <span class="o">=</span> <span class="n">List</span><span class="o">.</span><span class="n">T</span><span class="p">(</span><span class="n">Coefficient</span><span class="o">.</span><span class="n">T</span><span class="p">(</span><span class="n">xmltagname</span><span class="o">=</span><span class="s">&#39;Coefficient&#39;</span><span class="p">))</span></div>


<div class="viewcode-block" id="Decimation"><a class="viewcode-back" href="../../../library/reference/fdsn.html#pyrocko.fdsn.station.Decimation">[docs]</a><span class="k">class</span> <span class="nc">Decimation</span><span class="p">(</span><span class="n">Object</span><span class="p">):</span>
    <span class="sd">&#39;&#39;&#39;Corresponds to SEED blockette 57.&#39;&#39;&#39;</span>

    <span class="n">input_sample_rate</span> <span class="o">=</span> <span class="n">Frequency</span><span class="o">.</span><span class="n">T</span><span class="p">(</span><span class="n">xmltagname</span><span class="o">=</span><span class="s">&#39;InputSampleRate&#39;</span><span class="p">)</span>
    <span class="n">factor</span> <span class="o">=</span> <span class="n">Int</span><span class="o">.</span><span class="n">T</span><span class="p">(</span><span class="n">xmltagname</span><span class="o">=</span><span class="s">&#39;Factor&#39;</span><span class="p">)</span>
    <span class="n">offset</span> <span class="o">=</span> <span class="n">Int</span><span class="o">.</span><span class="n">T</span><span class="p">(</span><span class="n">xmltagname</span><span class="o">=</span><span class="s">&#39;Offset&#39;</span><span class="p">)</span>
    <span class="n">delay</span> <span class="o">=</span> <span class="n">FloatWithUnit</span><span class="o">.</span><span class="n">T</span><span class="p">(</span><span class="n">xmltagname</span><span class="o">=</span><span class="s">&#39;Delay&#39;</span><span class="p">)</span>
    <span class="n">correction</span> <span class="o">=</span> <span class="n">FloatWithUnit</span><span class="o">.</span><span class="n">T</span><span class="p">(</span><span class="n">xmltagname</span><span class="o">=</span><span class="s">&#39;Correction&#39;</span><span class="p">)</span></div>


<div class="viewcode-block" id="Operator"><a class="viewcode-back" href="../../../library/reference/fdsn.html#pyrocko.fdsn.station.Operator">[docs]</a><span class="k">class</span> <span class="nc">Operator</span><span class="p">(</span><span class="n">Object</span><span class="p">):</span>
    <span class="n">agency_list</span> <span class="o">=</span> <span class="n">List</span><span class="o">.</span><span class="n">T</span><span class="p">(</span><span class="n">Unicode</span><span class="o">.</span><span class="n">T</span><span class="p">(</span><span class="n">xmltagname</span><span class="o">=</span><span class="s">&#39;Agency&#39;</span><span class="p">))</span>
    <span class="n">contact_list</span> <span class="o">=</span> <span class="n">List</span><span class="o">.</span><span class="n">T</span><span class="p">(</span><span class="n">Person</span><span class="o">.</span><span class="n">T</span><span class="p">(</span><span class="n">xmltagname</span><span class="o">=</span><span class="s">&#39;Contact&#39;</span><span class="p">))</span>
    <span class="n">web_site</span> <span class="o">=</span> <span class="n">String</span><span class="o">.</span><span class="n">T</span><span class="p">(</span><span class="n">optional</span><span class="o">=</span><span class="k">True</span><span class="p">,</span> <span class="n">xmltagname</span><span class="o">=</span><span class="s">&#39;WebSite&#39;</span><span class="p">)</span></div>


<div class="viewcode-block" id="Comment"><a class="viewcode-back" href="../../../library/reference/fdsn.html#pyrocko.fdsn.station.Comment">[docs]</a><span class="k">class</span> <span class="nc">Comment</span><span class="p">(</span><span class="n">Object</span><span class="p">):</span>
    <span class="sd">&#39;&#39;&#39;Container for a comment or log entry. Corresponds to SEED</span>
<span class="sd">    blockettes 31, 51 and 59.&#39;&#39;&#39;</span>

    <span class="nb">id</span> <span class="o">=</span> <span class="n">Counter</span><span class="o">.</span><span class="n">T</span><span class="p">(</span><span class="n">optional</span><span class="o">=</span><span class="k">True</span><span class="p">,</span> <span class="n">xmlstyle</span><span class="o">=</span><span class="s">&#39;attribute&#39;</span><span class="p">)</span>
    <span class="n">value</span> <span class="o">=</span> <span class="n">Unicode</span><span class="o">.</span><span class="n">T</span><span class="p">(</span><span class="n">xmltagname</span><span class="o">=</span><span class="s">&#39;Value&#39;</span><span class="p">)</span>
    <span class="n">begin_effective_time</span> <span class="o">=</span> <span class="n">DummyAwareOptionalTimestamp</span><span class="o">.</span><span class="n">T</span><span class="p">(</span>
        <span class="n">optional</span><span class="o">=</span><span class="k">True</span><span class="p">,</span>
        <span class="n">xmltagname</span><span class="o">=</span><span class="s">&#39;BeginEffectiveTime&#39;</span><span class="p">)</span>
    <span class="n">end_effective_time</span> <span class="o">=</span> <span class="n">DummyAwareOptionalTimestamp</span><span class="o">.</span><span class="n">T</span><span class="p">(</span>
        <span class="n">optional</span><span class="o">=</span><span class="k">True</span><span class="p">,</span>
        <span class="n">xmltagname</span><span class="o">=</span><span class="s">&#39;EndEffectiveTime&#39;</span><span class="p">)</span>
    <span class="n">author_list</span> <span class="o">=</span> <span class="n">List</span><span class="o">.</span><span class="n">T</span><span class="p">(</span><span class="n">Person</span><span class="o">.</span><span class="n">T</span><span class="p">(</span><span class="n">xmltagname</span><span class="o">=</span><span class="s">&#39;Author&#39;</span><span class="p">))</span></div>


<div class="viewcode-block" id="ResponseList"><a class="viewcode-back" href="../../../library/reference/fdsn.html#pyrocko.fdsn.station.ResponseList">[docs]</a><span class="k">class</span> <span class="nc">ResponseList</span><span class="p">(</span><span class="n">BaseFilter</span><span class="p">):</span>
    <span class="sd">&#39;&#39;&#39;Response: list of frequency, amplitude and phase values.</span>
<span class="sd">    Corresponds to SEED blockette 55.&#39;&#39;&#39;</span>

    <span class="n">response_list_element_list</span> <span class="o">=</span> <span class="n">List</span><span class="o">.</span><span class="n">T</span><span class="p">(</span>
        <span class="n">ResponseListElement</span><span class="o">.</span><span class="n">T</span><span class="p">(</span><span class="n">xmltagname</span><span class="o">=</span><span class="s">&#39;ResponseListElement&#39;</span><span class="p">))</span></div>


<div class="viewcode-block" id="Log"><a class="viewcode-back" href="../../../library/reference/fdsn.html#pyrocko.fdsn.station.Log">[docs]</a><span class="k">class</span> <span class="nc">Log</span><span class="p">(</span><span class="n">Object</span><span class="p">):</span>
    <span class="sd">&#39;&#39;&#39;Container for log entries.&#39;&#39;&#39;</span>

    <span class="n">entry_list</span> <span class="o">=</span> <span class="n">List</span><span class="o">.</span><span class="n">T</span><span class="p">(</span><span class="n">Comment</span><span class="o">.</span><span class="n">T</span><span class="p">(</span><span class="n">xmltagname</span><span class="o">=</span><span class="s">&#39;Entry&#39;</span><span class="p">))</span></div>


<div class="viewcode-block" id="ResponseStage"><a class="viewcode-back" href="../../../library/reference/fdsn.html#pyrocko.fdsn.station.ResponseStage">[docs]</a><span class="k">class</span> <span class="nc">ResponseStage</span><span class="p">(</span><span class="n">Object</span><span class="p">):</span>
    <span class="sd">&#39;&#39;&#39;This complex type represents channel response and covers SEED</span>
<span class="sd">    blockettes 53 to 56.&#39;&#39;&#39;</span>

    <span class="n">number</span> <span class="o">=</span> <span class="n">Counter</span><span class="o">.</span><span class="n">T</span><span class="p">(</span><span class="n">xmlstyle</span><span class="o">=</span><span class="s">&#39;attribute&#39;</span><span class="p">)</span>
    <span class="n">resource_id</span> <span class="o">=</span> <span class="n">String</span><span class="o">.</span><span class="n">T</span><span class="p">(</span><span class="n">optional</span><span class="o">=</span><span class="k">True</span><span class="p">,</span> <span class="n">xmlstyle</span><span class="o">=</span><span class="s">&#39;attribute&#39;</span><span class="p">)</span>
    <span class="n">poles_zeros_list</span> <span class="o">=</span> <span class="n">List</span><span class="o">.</span><span class="n">T</span><span class="p">(</span>
        <span class="n">PolesZeros</span><span class="o">.</span><span class="n">T</span><span class="p">(</span><span class="n">optional</span><span class="o">=</span><span class="k">True</span><span class="p">,</span> <span class="n">xmltagname</span><span class="o">=</span><span class="s">&#39;PolesZeros&#39;</span><span class="p">))</span>
    <span class="n">coefficients_list</span> <span class="o">=</span> <span class="n">List</span><span class="o">.</span><span class="n">T</span><span class="p">(</span>
        <span class="n">Coefficients</span><span class="o">.</span><span class="n">T</span><span class="p">(</span><span class="n">optional</span><span class="o">=</span><span class="k">True</span><span class="p">,</span> <span class="n">xmltagname</span><span class="o">=</span><span class="s">&#39;Coefficients&#39;</span><span class="p">))</span>
    <span class="n">response_list</span> <span class="o">=</span> <span class="n">ResponseList</span><span class="o">.</span><span class="n">T</span><span class="p">(</span><span class="n">optional</span><span class="o">=</span><span class="k">True</span><span class="p">,</span> <span class="n">xmltagname</span><span class="o">=</span><span class="s">&#39;ResponseList&#39;</span><span class="p">)</span>
    <span class="n">fir</span> <span class="o">=</span> <span class="n">FIR</span><span class="o">.</span><span class="n">T</span><span class="p">(</span><span class="n">optional</span><span class="o">=</span><span class="k">True</span><span class="p">,</span> <span class="n">xmltagname</span><span class="o">=</span><span class="s">&#39;FIR&#39;</span><span class="p">)</span>
    <span class="n">polynomial</span> <span class="o">=</span> <span class="n">Polynomial</span><span class="o">.</span><span class="n">T</span><span class="p">(</span><span class="n">optional</span><span class="o">=</span><span class="k">True</span><span class="p">,</span> <span class="n">xmltagname</span><span class="o">=</span><span class="s">&#39;Polynomial&#39;</span><span class="p">)</span>
    <span class="n">decimation</span> <span class="o">=</span> <span class="n">Decimation</span><span class="o">.</span><span class="n">T</span><span class="p">(</span><span class="n">optional</span><span class="o">=</span><span class="k">True</span><span class="p">,</span> <span class="n">xmltagname</span><span class="o">=</span><span class="s">&#39;Decimation&#39;</span><span class="p">)</span>
    <span class="n">stage_gain</span> <span class="o">=</span> <span class="n">Gain</span><span class="o">.</span><span class="n">T</span><span class="p">(</span><span class="n">optional</span><span class="o">=</span><span class="k">True</span><span class="p">,</span> <span class="n">xmltagname</span><span class="o">=</span><span class="s">&#39;StageGain&#39;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">get_pyrocko_response</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">nslc</span><span class="p">):</span>
        <span class="n">responses</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">pzs</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">poles_zeros_list</span><span class="p">:</span>
            <span class="n">pz</span> <span class="o">=</span> <span class="n">pzs</span><span class="o">.</span><span class="n">get_pyrocko_response</span><span class="p">()</span>
            <span class="n">responses</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">pz</span><span class="p">)</span>

        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">poles_zeros_list</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">:</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">warn</span><span class="p">(</span>
                <span class="s">&#39;multiple poles and zeros records in single response stage &#39;</span>
                <span class="s">&#39;(%s.%s.%s.%s)&#39;</span> <span class="o">%</span> <span class="n">nslc</span><span class="p">)</span>

        <span class="k">if</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">coefficients_list</span> <span class="ow">or</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">response_list</span> <span class="ow">or</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">fir</span> <span class="ow">or</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">polynomial</span><span class="p">):</span>

            <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s">&#39;unhandled response at stage %i&#39;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">number</span><span class="p">)</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">stage_gain</span><span class="p">:</span>
            <span class="n">responses</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
                <span class="n">trace</span><span class="o">.</span><span class="n">PoleZeroResponse</span><span class="p">(</span><span class="n">constant</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">stage_gain</span><span class="o">.</span><span class="n">value</span><span class="p">))</span>

        <span class="k">return</span> <span class="n">responses</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">input_units</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">for</span> <span class="n">e</span> <span class="ow">in</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">poles_zeros_list</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">coefficients_list</span> <span class="o">+</span>
                  <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">response_list</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">fir</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">polynomial</span><span class="p">]):</span>
            <span class="k">if</span> <span class="n">e</span> <span class="ow">is</span> <span class="ow">not</span> <span class="k">None</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">e</span><span class="o">.</span><span class="n">input_units</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">output_units</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">for</span> <span class="n">e</span> <span class="ow">in</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">poles_zeros_list</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">coefficients_list</span> <span class="o">+</span>
                  <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">response_list</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">fir</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">polynomial</span><span class="p">]):</span>
            <span class="k">if</span> <span class="n">e</span> <span class="ow">is</span> <span class="ow">not</span> <span class="k">None</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">e</span><span class="o">.</span><span class="n">output_units</span></div>


<div class="viewcode-block" id="Response"><a class="viewcode-back" href="../../../library/reference/fdsn.html#pyrocko.fdsn.station.Response">[docs]</a><span class="k">class</span> <span class="nc">Response</span><span class="p">(</span><span class="n">Object</span><span class="p">):</span>
    <span class="n">resource_id</span> <span class="o">=</span> <span class="n">String</span><span class="o">.</span><span class="n">T</span><span class="p">(</span><span class="n">optional</span><span class="o">=</span><span class="k">True</span><span class="p">,</span> <span class="n">xmlstyle</span><span class="o">=</span><span class="s">&#39;attribute&#39;</span><span class="p">)</span>
    <span class="n">instrument_sensitivity</span> <span class="o">=</span> <span class="n">Sensitivity</span><span class="o">.</span><span class="n">T</span><span class="p">(</span><span class="n">optional</span><span class="o">=</span><span class="k">True</span><span class="p">,</span>
                                           <span class="n">xmltagname</span><span class="o">=</span><span class="s">&#39;InstrumentSensitivity&#39;</span><span class="p">)</span>
    <span class="n">instrument_polynomial</span> <span class="o">=</span> <span class="n">Polynomial</span><span class="o">.</span><span class="n">T</span><span class="p">(</span><span class="n">optional</span><span class="o">=</span><span class="k">True</span><span class="p">,</span>
                                         <span class="n">xmltagname</span><span class="o">=</span><span class="s">&#39;InstrumentPolynomial&#39;</span><span class="p">)</span>
    <span class="n">stage_list</span> <span class="o">=</span> <span class="n">List</span><span class="o">.</span><span class="n">T</span><span class="p">(</span><span class="n">ResponseStage</span><span class="o">.</span><span class="n">T</span><span class="p">(</span><span class="n">xmltagname</span><span class="o">=</span><span class="s">&#39;Stage&#39;</span><span class="p">))</span>

    <span class="k">def</span> <span class="nf">get_pyrocko_response</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">nslc</span><span class="p">,</span> <span class="n">fake_input_units</span><span class="o">=</span><span class="k">None</span><span class="p">):</span>
        <span class="n">responses</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">stage</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">stage_list</span><span class="p">:</span>
            <span class="n">responses</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">stage</span><span class="o">.</span><span class="n">get_pyrocko_response</span><span class="p">(</span><span class="n">nslc</span><span class="p">))</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">stage_list</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">instrument_sensitivity</span><span class="p">:</span>
            <span class="n">responses</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
                <span class="n">trace</span><span class="o">.</span><span class="n">PoleZeroResponse</span><span class="p">(</span>
                    <span class="n">constant</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">instrument_sensitivity</span><span class="o">.</span><span class="n">value</span><span class="p">))</span>

        <span class="k">if</span> <span class="n">fake_input_units</span> <span class="ow">is</span> <span class="ow">not</span> <span class="k">None</span><span class="p">:</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">instrument_sensitivity</span> <span class="ow">or</span> \
                    <span class="bp">self</span><span class="o">.</span><span class="n">instrument_sensitivity</span><span class="o">.</span><span class="n">input_units</span> <span class="ow">is</span> <span class="k">None</span><span class="p">:</span>

                <span class="k">raise</span> <span class="n">NoResponseInformation</span><span class="p">(</span><span class="s">&#39;no input units given&#39;</span><span class="p">)</span>

            <span class="n">input_units</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">instrument_sensitivity</span><span class="o">.</span><span class="n">input_units</span><span class="o">.</span><span class="n">name</span>

            <span class="k">try</span><span class="p">:</span>
                <span class="n">conresp</span> <span class="o">=</span> <span class="n">conversion</span><span class="p">[</span>
                    <span class="n">fake_input_units</span><span class="o">.</span><span class="n">upper</span><span class="p">(),</span> <span class="n">input_units</span><span class="o">.</span><span class="n">upper</span><span class="p">()]</span>

            <span class="k">except</span> <span class="ne">KeyError</span><span class="p">:</span>
                <span class="k">raise</span> <span class="n">NoResponseInformation</span><span class="p">(</span>
                    <span class="s">&#39;cannot convert between units: %s, %s&#39;</span>
                    <span class="o">%</span> <span class="p">(</span><span class="n">fake_input_units</span><span class="p">,</span> <span class="n">input_units</span><span class="p">))</span>

            <span class="k">if</span> <span class="n">conresp</span> <span class="ow">is</span> <span class="ow">not</span> <span class="k">None</span><span class="p">:</span>
                <span class="n">responses</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">conresp</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">trace</span><span class="o">.</span><span class="n">MultiplyResponse</span><span class="p">(</span><span class="n">responses</span><span class="p">)</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">from_pyrocko_pz_response</span><span class="p">(</span><span class="n">cls</span><span class="p">,</span> <span class="n">presponse</span><span class="p">,</span> <span class="n">input_unit</span><span class="p">,</span> <span class="n">output_unit</span><span class="p">,</span>
                                 <span class="n">normalization_frequency</span><span class="o">=</span><span class="mf">1.0</span><span class="p">):</span>

        <span class="n">norm_factor</span> <span class="o">=</span> <span class="mf">1.0</span><span class="o">/</span><span class="nb">float</span><span class="p">(</span><span class="nb">abs</span><span class="p">(</span>
            <span class="n">presponse</span><span class="o">.</span><span class="n">evaluate</span><span class="p">(</span><span class="n">num</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="n">normalization_frequency</span><span class="p">]))[</span><span class="mi">0</span><span class="p">]</span>
            <span class="o">/</span> <span class="n">presponse</span><span class="o">.</span><span class="n">constant</span><span class="p">))</span>

        <span class="n">pzs</span> <span class="o">=</span> <span class="n">PolesZeros</span><span class="p">(</span>
            <span class="n">pz_transfer_function_type</span><span class="o">=</span><span class="s">&#39;LAPLACE (RADIANS/SECOND)&#39;</span><span class="p">,</span>
            <span class="n">normalization_factor</span><span class="o">=</span><span class="n">norm_factor</span><span class="p">,</span>
            <span class="n">normalization_frequency</span><span class="o">=</span><span class="n">Frequency</span><span class="p">(</span><span class="n">normalization_frequency</span><span class="p">),</span>
            <span class="n">zero_list</span><span class="o">=</span><span class="p">[</span><span class="n">PoleZero</span><span class="p">(</span><span class="n">real</span><span class="o">=</span><span class="n">FloatNoUnit</span><span class="p">(</span><span class="n">z</span><span class="o">.</span><span class="n">real</span><span class="p">),</span>
                                <span class="n">imaginary</span><span class="o">=</span><span class="n">FloatNoUnit</span><span class="p">(</span><span class="n">z</span><span class="o">.</span><span class="n">imag</span><span class="p">))</span>
                       <span class="k">for</span> <span class="n">z</span> <span class="ow">in</span> <span class="n">presponse</span><span class="o">.</span><span class="n">zeros</span><span class="p">],</span>
            <span class="n">pole_list</span><span class="o">=</span><span class="p">[</span><span class="n">PoleZero</span><span class="p">(</span><span class="n">real</span><span class="o">=</span><span class="n">FloatNoUnit</span><span class="p">(</span><span class="n">z</span><span class="o">.</span><span class="n">real</span><span class="p">),</span>
                                <span class="n">imaginary</span><span class="o">=</span><span class="n">FloatNoUnit</span><span class="p">(</span><span class="n">z</span><span class="o">.</span><span class="n">imag</span><span class="p">))</span>
                       <span class="k">for</span> <span class="n">z</span> <span class="ow">in</span> <span class="n">presponse</span><span class="o">.</span><span class="n">poles</span><span class="p">])</span>

        <span class="n">pzs</span><span class="o">.</span><span class="n">validate</span><span class="p">()</span>

        <span class="n">stage</span> <span class="o">=</span> <span class="n">ResponseStage</span><span class="p">(</span>
            <span class="n">number</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
            <span class="n">poles_zeros_list</span><span class="o">=</span><span class="p">[</span><span class="n">pzs</span><span class="p">],</span>
            <span class="n">stage_gain</span><span class="o">=</span><span class="n">Gain</span><span class="p">(</span><span class="nb">abs</span><span class="p">(</span><span class="n">presponse</span><span class="o">.</span><span class="n">constant</span><span class="p">)</span><span class="o">/</span><span class="n">norm_factor</span><span class="p">))</span>

        <span class="n">resp</span> <span class="o">=</span> <span class="n">Response</span><span class="p">(</span>
            <span class="n">instrument_sensitivity</span><span class="o">=</span><span class="n">Sensitivity</span><span class="p">(</span>
                <span class="n">value</span><span class="o">=</span><span class="n">stage</span><span class="o">.</span><span class="n">stage_gain</span><span class="o">.</span><span class="n">value</span><span class="p">,</span>
                <span class="n">input_units</span><span class="o">=</span><span class="n">Units</span><span class="p">(</span><span class="n">input_unit</span><span class="p">),</span>
                <span class="n">output_units</span><span class="o">=</span><span class="n">Units</span><span class="p">(</span><span class="n">output_unit</span><span class="p">)),</span>

            <span class="n">stage_list</span><span class="o">=</span><span class="p">[</span><span class="n">stage</span><span class="p">])</span>

        <span class="k">return</span> <span class="n">resp</span></div>


<div class="viewcode-block" id="BaseNode"><a class="viewcode-back" href="../../../library/reference/fdsn.html#pyrocko.fdsn.station.BaseNode">[docs]</a><span class="k">class</span> <span class="nc">BaseNode</span><span class="p">(</span><span class="n">Object</span><span class="p">):</span>
    <span class="sd">&#39;&#39;&#39;A base node type for derivation from: Network, Station and</span>
<span class="sd">    Channel types.&#39;&#39;&#39;</span>

    <span class="n">code</span> <span class="o">=</span> <span class="n">String</span><span class="o">.</span><span class="n">T</span><span class="p">(</span><span class="n">xmlstyle</span><span class="o">=</span><span class="s">&#39;attribute&#39;</span><span class="p">)</span>
    <span class="n">start_date</span> <span class="o">=</span> <span class="n">DummyAwareOptionalTimestamp</span><span class="o">.</span><span class="n">T</span><span class="p">(</span><span class="n">optional</span><span class="o">=</span><span class="k">True</span><span class="p">,</span>
                                               <span class="n">xmlstyle</span><span class="o">=</span><span class="s">&#39;attribute&#39;</span><span class="p">)</span>
    <span class="n">end_date</span> <span class="o">=</span> <span class="n">DummyAwareOptionalTimestamp</span><span class="o">.</span><span class="n">T</span><span class="p">(</span><span class="n">optional</span><span class="o">=</span><span class="k">True</span><span class="p">,</span>
                                             <span class="n">xmlstyle</span><span class="o">=</span><span class="s">&#39;attribute&#39;</span><span class="p">)</span>
    <span class="n">restricted_status</span> <span class="o">=</span> <span class="n">RestrictedStatus</span><span class="o">.</span><span class="n">T</span><span class="p">(</span><span class="n">optional</span><span class="o">=</span><span class="k">True</span><span class="p">,</span> <span class="n">xmlstyle</span><span class="o">=</span><span class="s">&#39;attribute&#39;</span><span class="p">)</span>
    <span class="n">alternate_code</span> <span class="o">=</span> <span class="n">String</span><span class="o">.</span><span class="n">T</span><span class="p">(</span><span class="n">optional</span><span class="o">=</span><span class="k">True</span><span class="p">,</span> <span class="n">xmlstyle</span><span class="o">=</span><span class="s">&#39;attribute&#39;</span><span class="p">)</span>
    <span class="n">historical_code</span> <span class="o">=</span> <span class="n">String</span><span class="o">.</span><span class="n">T</span><span class="p">(</span><span class="n">optional</span><span class="o">=</span><span class="k">True</span><span class="p">,</span> <span class="n">xmlstyle</span><span class="o">=</span><span class="s">&#39;attribute&#39;</span><span class="p">)</span>
    <span class="n">description</span> <span class="o">=</span> <span class="n">Unicode</span><span class="o">.</span><span class="n">T</span><span class="p">(</span><span class="n">optional</span><span class="o">=</span><span class="k">True</span><span class="p">,</span> <span class="n">xmltagname</span><span class="o">=</span><span class="s">&#39;Description&#39;</span><span class="p">)</span>
    <span class="n">comment_list</span> <span class="o">=</span> <span class="n">List</span><span class="o">.</span><span class="n">T</span><span class="p">(</span><span class="n">Comment</span><span class="o">.</span><span class="n">T</span><span class="p">(</span><span class="n">xmltagname</span><span class="o">=</span><span class="s">&#39;Comment&#39;</span><span class="p">))</span>

    <span class="k">def</span> <span class="nf">spans</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">):</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">args</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">return</span> <span class="k">True</span>
        <span class="k">elif</span> <span class="nb">len</span><span class="p">(</span><span class="n">args</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
            <span class="k">return</span> <span class="p">((</span><span class="bp">self</span><span class="o">.</span><span class="n">start_date</span> <span class="ow">is</span> <span class="k">None</span> <span class="ow">or</span>
                     <span class="bp">self</span><span class="o">.</span><span class="n">start_date</span> <span class="o">&lt;=</span> <span class="n">args</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="ow">and</span>
                    <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">end_date</span> <span class="ow">is</span> <span class="k">None</span> <span class="ow">or</span>
                     <span class="n">args</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">&lt;=</span> <span class="bp">self</span><span class="o">.</span><span class="n">end_date</span><span class="p">))</span>

        <span class="k">elif</span> <span class="nb">len</span><span class="p">(</span><span class="n">args</span><span class="p">)</span> <span class="o">==</span> <span class="mi">2</span><span class="p">:</span>
            <span class="k">return</span> <span class="p">((</span><span class="bp">self</span><span class="o">.</span><span class="n">start_date</span> <span class="ow">is</span> <span class="k">None</span> <span class="ow">or</span>
                     <span class="n">args</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">&gt;=</span> <span class="bp">self</span><span class="o">.</span><span class="n">start_date</span><span class="p">)</span> <span class="ow">and</span>
                    <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">end_date</span> <span class="ow">is</span> <span class="k">None</span> <span class="ow">or</span>
                     <span class="bp">self</span><span class="o">.</span><span class="n">end_date</span> <span class="o">&gt;=</span> <span class="n">args</span><span class="p">[</span><span class="mi">0</span><span class="p">]))</span></div>


<div class="viewcode-block" id="Channel"><a class="viewcode-back" href="../../../library/reference/fdsn.html#pyrocko.fdsn.station.Channel">[docs]</a><span class="k">class</span> <span class="nc">Channel</span><span class="p">(</span><span class="n">BaseNode</span><span class="p">):</span>
    <span class="sd">&#39;&#39;&#39;Equivalent to SEED blockette 52 and parent element for the</span>
<span class="sd">    related the response blockettes.&#39;&#39;&#39;</span>

    <span class="n">location_code</span> <span class="o">=</span> <span class="n">String</span><span class="o">.</span><span class="n">T</span><span class="p">(</span><span class="n">xmlstyle</span><span class="o">=</span><span class="s">&#39;attribute&#39;</span><span class="p">)</span>
    <span class="n">external_reference_list</span> <span class="o">=</span> <span class="n">List</span><span class="o">.</span><span class="n">T</span><span class="p">(</span>
        <span class="n">ExternalReference</span><span class="o">.</span><span class="n">T</span><span class="p">(</span><span class="n">xmltagname</span><span class="o">=</span><span class="s">&#39;ExternalReference&#39;</span><span class="p">))</span>
    <span class="n">latitude</span> <span class="o">=</span> <span class="n">Latitude</span><span class="o">.</span><span class="n">T</span><span class="p">(</span><span class="n">xmltagname</span><span class="o">=</span><span class="s">&#39;Latitude&#39;</span><span class="p">)</span>
    <span class="n">longitude</span> <span class="o">=</span> <span class="n">Longitude</span><span class="o">.</span><span class="n">T</span><span class="p">(</span><span class="n">xmltagname</span><span class="o">=</span><span class="s">&#39;Longitude&#39;</span><span class="p">)</span>
    <span class="n">elevation</span> <span class="o">=</span> <span class="n">Distance</span><span class="o">.</span><span class="n">T</span><span class="p">(</span><span class="n">xmltagname</span><span class="o">=</span><span class="s">&#39;Elevation&#39;</span><span class="p">)</span>
    <span class="n">depth</span> <span class="o">=</span> <span class="n">Distance</span><span class="o">.</span><span class="n">T</span><span class="p">(</span><span class="n">xmltagname</span><span class="o">=</span><span class="s">&#39;Depth&#39;</span><span class="p">)</span>
    <span class="n">azimuth</span> <span class="o">=</span> <span class="n">Azimuth</span><span class="o">.</span><span class="n">T</span><span class="p">(</span><span class="n">optional</span><span class="o">=</span><span class="k">True</span><span class="p">,</span> <span class="n">xmltagname</span><span class="o">=</span><span class="s">&#39;Azimuth&#39;</span><span class="p">)</span>
    <span class="n">dip</span> <span class="o">=</span> <span class="n">Dip</span><span class="o">.</span><span class="n">T</span><span class="p">(</span><span class="n">optional</span><span class="o">=</span><span class="k">True</span><span class="p">,</span> <span class="n">xmltagname</span><span class="o">=</span><span class="s">&#39;Dip&#39;</span><span class="p">)</span>
    <span class="n">type_list</span> <span class="o">=</span> <span class="n">List</span><span class="o">.</span><span class="n">T</span><span class="p">(</span><span class="n">Type</span><span class="o">.</span><span class="n">T</span><span class="p">(</span><span class="n">xmltagname</span><span class="o">=</span><span class="s">&#39;Type&#39;</span><span class="p">))</span>
    <span class="n">sample_rate</span> <span class="o">=</span> <span class="n">SampleRate</span><span class="o">.</span><span class="n">T</span><span class="p">(</span><span class="n">optional</span><span class="o">=</span><span class="k">True</span><span class="p">,</span> <span class="n">xmltagname</span><span class="o">=</span><span class="s">&#39;SampleRate&#39;</span><span class="p">)</span>
    <span class="n">sample_rate_ratio</span> <span class="o">=</span> <span class="n">SampleRateRatio</span><span class="o">.</span><span class="n">T</span><span class="p">(</span><span class="n">optional</span><span class="o">=</span><span class="k">True</span><span class="p">,</span>
                                          <span class="n">xmltagname</span><span class="o">=</span><span class="s">&#39;SampleRateRatio&#39;</span><span class="p">)</span>
    <span class="n">storage_format</span> <span class="o">=</span> <span class="n">String</span><span class="o">.</span><span class="n">T</span><span class="p">(</span><span class="n">optional</span><span class="o">=</span><span class="k">True</span><span class="p">,</span> <span class="n">xmltagname</span><span class="o">=</span><span class="s">&#39;StorageFormat&#39;</span><span class="p">)</span>
    <span class="n">clock_drift</span> <span class="o">=</span> <span class="n">ClockDrift</span><span class="o">.</span><span class="n">T</span><span class="p">(</span><span class="n">optional</span><span class="o">=</span><span class="k">True</span><span class="p">,</span> <span class="n">xmltagname</span><span class="o">=</span><span class="s">&#39;ClockDrift&#39;</span><span class="p">)</span>
    <span class="n">calibration_units</span> <span class="o">=</span> <span class="n">Units</span><span class="o">.</span><span class="n">T</span><span class="p">(</span><span class="n">optional</span><span class="o">=</span><span class="k">True</span><span class="p">,</span> <span class="n">xmltagname</span><span class="o">=</span><span class="s">&#39;CalibrationUnits&#39;</span><span class="p">)</span>
    <span class="n">sensor</span> <span class="o">=</span> <span class="n">Equipment</span><span class="o">.</span><span class="n">T</span><span class="p">(</span><span class="n">optional</span><span class="o">=</span><span class="k">True</span><span class="p">,</span> <span class="n">xmltagname</span><span class="o">=</span><span class="s">&#39;Sensor&#39;</span><span class="p">)</span>
    <span class="n">pre_amplifier</span> <span class="o">=</span> <span class="n">Equipment</span><span class="o">.</span><span class="n">T</span><span class="p">(</span><span class="n">optional</span><span class="o">=</span><span class="k">True</span><span class="p">,</span> <span class="n">xmltagname</span><span class="o">=</span><span class="s">&#39;PreAmplifier&#39;</span><span class="p">)</span>
    <span class="n">data_logger</span> <span class="o">=</span> <span class="n">Equipment</span><span class="o">.</span><span class="n">T</span><span class="p">(</span><span class="n">optional</span><span class="o">=</span><span class="k">True</span><span class="p">,</span> <span class="n">xmltagname</span><span class="o">=</span><span class="s">&#39;DataLogger&#39;</span><span class="p">)</span>
    <span class="n">equipment</span> <span class="o">=</span> <span class="n">Equipment</span><span class="o">.</span><span class="n">T</span><span class="p">(</span><span class="n">optional</span><span class="o">=</span><span class="k">True</span><span class="p">,</span> <span class="n">xmltagname</span><span class="o">=</span><span class="s">&#39;Equipment&#39;</span><span class="p">)</span>
    <span class="n">response</span> <span class="o">=</span> <span class="n">Response</span><span class="o">.</span><span class="n">T</span><span class="p">(</span><span class="n">optional</span><span class="o">=</span><span class="k">True</span><span class="p">,</span> <span class="n">xmltagname</span><span class="o">=</span><span class="s">&#39;Response&#39;</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">position_values</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">lat</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">latitude</span><span class="o">.</span><span class="n">value</span>
        <span class="n">lon</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">longitude</span><span class="o">.</span><span class="n">value</span>
        <span class="n">elevation</span> <span class="o">=</span> <span class="n">value_or_none</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">elevation</span><span class="p">)</span>
        <span class="n">depth</span> <span class="o">=</span> <span class="n">value_or_none</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">depth</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">lat</span><span class="p">,</span> <span class="n">lon</span><span class="p">,</span> <span class="n">elevation</span><span class="p">,</span> <span class="n">depth</span></div>


<div class="viewcode-block" id="Station"><a class="viewcode-back" href="../../../library/reference/fdsn.html#pyrocko.fdsn.station.Station">[docs]</a><span class="k">class</span> <span class="nc">Station</span><span class="p">(</span><span class="n">BaseNode</span><span class="p">):</span>
    <span class="sd">&#39;&#39;&#39;This type represents a Station epoch. It is common to only have</span>
<span class="sd">    a single station epoch with the station&#39;s creation and termination</span>
<span class="sd">    dates as the epoch start and end dates.&#39;&#39;&#39;</span>

    <span class="n">latitude</span> <span class="o">=</span> <span class="n">Latitude</span><span class="o">.</span><span class="n">T</span><span class="p">(</span><span class="n">xmltagname</span><span class="o">=</span><span class="s">&#39;Latitude&#39;</span><span class="p">)</span>
    <span class="n">longitude</span> <span class="o">=</span> <span class="n">Longitude</span><span class="o">.</span><span class="n">T</span><span class="p">(</span><span class="n">xmltagname</span><span class="o">=</span><span class="s">&#39;Longitude&#39;</span><span class="p">)</span>
    <span class="n">elevation</span> <span class="o">=</span> <span class="n">Distance</span><span class="o">.</span><span class="n">T</span><span class="p">(</span><span class="n">xmltagname</span><span class="o">=</span><span class="s">&#39;Elevation&#39;</span><span class="p">)</span>
    <span class="n">site</span> <span class="o">=</span> <span class="n">Site</span><span class="o">.</span><span class="n">T</span><span class="p">(</span><span class="n">optional</span><span class="o">=</span><span class="k">True</span><span class="p">,</span> <span class="n">xmltagname</span><span class="o">=</span><span class="s">&#39;Site&#39;</span><span class="p">)</span>
    <span class="n">vault</span> <span class="o">=</span> <span class="n">Unicode</span><span class="o">.</span><span class="n">T</span><span class="p">(</span><span class="n">optional</span><span class="o">=</span><span class="k">True</span><span class="p">,</span> <span class="n">xmltagname</span><span class="o">=</span><span class="s">&#39;Vault&#39;</span><span class="p">)</span>
    <span class="n">geology</span> <span class="o">=</span> <span class="n">Unicode</span><span class="o">.</span><span class="n">T</span><span class="p">(</span><span class="n">optional</span><span class="o">=</span><span class="k">True</span><span class="p">,</span> <span class="n">xmltagname</span><span class="o">=</span><span class="s">&#39;Geology&#39;</span><span class="p">)</span>
    <span class="n">equipment_list</span> <span class="o">=</span> <span class="n">List</span><span class="o">.</span><span class="n">T</span><span class="p">(</span><span class="n">Equipment</span><span class="o">.</span><span class="n">T</span><span class="p">(</span><span class="n">xmltagname</span><span class="o">=</span><span class="s">&#39;Equipment&#39;</span><span class="p">))</span>
    <span class="n">operator_list</span> <span class="o">=</span> <span class="n">List</span><span class="o">.</span><span class="n">T</span><span class="p">(</span><span class="n">Operator</span><span class="o">.</span><span class="n">T</span><span class="p">(</span><span class="n">xmltagname</span><span class="o">=</span><span class="s">&#39;Operator&#39;</span><span class="p">))</span>
    <span class="n">creation_date</span> <span class="o">=</span> <span class="n">DummyAwareOptionalTimestamp</span><span class="o">.</span><span class="n">T</span><span class="p">(</span>
        <span class="n">optional</span><span class="o">=</span><span class="k">True</span><span class="p">,</span> <span class="n">xmltagname</span><span class="o">=</span><span class="s">&#39;CreationDate&#39;</span><span class="p">)</span>
    <span class="n">termination_date</span> <span class="o">=</span> <span class="n">DummyAwareOptionalTimestamp</span><span class="o">.</span><span class="n">T</span><span class="p">(</span>
        <span class="n">optional</span><span class="o">=</span><span class="k">True</span><span class="p">,</span> <span class="n">xmltagname</span><span class="o">=</span><span class="s">&#39;TerminationDate&#39;</span><span class="p">)</span>
    <span class="n">total_number_channels</span> <span class="o">=</span> <span class="n">Counter</span><span class="o">.</span><span class="n">T</span><span class="p">(</span>
        <span class="n">optional</span><span class="o">=</span><span class="k">True</span><span class="p">,</span> <span class="n">xmltagname</span><span class="o">=</span><span class="s">&#39;TotalNumberChannels&#39;</span><span class="p">)</span>
    <span class="n">selected_number_channels</span> <span class="o">=</span> <span class="n">Counter</span><span class="o">.</span><span class="n">T</span><span class="p">(</span>
        <span class="n">optional</span><span class="o">=</span><span class="k">True</span><span class="p">,</span> <span class="n">xmltagname</span><span class="o">=</span><span class="s">&#39;SelectedNumberChannels&#39;</span><span class="p">)</span>
    <span class="n">external_reference_list</span> <span class="o">=</span> <span class="n">List</span><span class="o">.</span><span class="n">T</span><span class="p">(</span>
        <span class="n">ExternalReference</span><span class="o">.</span><span class="n">T</span><span class="p">(</span><span class="n">xmltagname</span><span class="o">=</span><span class="s">&#39;ExternalReference&#39;</span><span class="p">))</span>
    <span class="n">channel_list</span> <span class="o">=</span> <span class="n">List</span><span class="o">.</span><span class="n">T</span><span class="p">(</span><span class="n">Channel</span><span class="o">.</span><span class="n">T</span><span class="p">(</span><span class="n">xmltagname</span><span class="o">=</span><span class="s">&#39;Channel&#39;</span><span class="p">))</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">position_values</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">lat</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">latitude</span><span class="o">.</span><span class="n">value</span>
        <span class="n">lon</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">longitude</span><span class="o">.</span><span class="n">value</span>
        <span class="n">elevation</span> <span class="o">=</span> <span class="n">value_or_none</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">elevation</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">lat</span><span class="p">,</span> <span class="n">lon</span><span class="p">,</span> <span class="n">elevation</span></div>


<div class="viewcode-block" id="Network"><a class="viewcode-back" href="../../../library/reference/fdsn.html#pyrocko.fdsn.station.Network">[docs]</a><span class="k">class</span> <span class="nc">Network</span><span class="p">(</span><span class="n">BaseNode</span><span class="p">):</span>
    <span class="sd">&#39;&#39;&#39;This type represents the Network layer, all station metadata is</span>
<span class="sd">    contained within this element. The official name of the network or</span>
<span class="sd">    other descriptive information can be included in the Description</span>
<span class="sd">    element. The Network can contain 0 or more Stations.&#39;&#39;&#39;</span>

    <span class="n">total_number_stations</span> <span class="o">=</span> <span class="n">Counter</span><span class="o">.</span><span class="n">T</span><span class="p">(</span><span class="n">optional</span><span class="o">=</span><span class="k">True</span><span class="p">,</span>
                                      <span class="n">xmltagname</span><span class="o">=</span><span class="s">&#39;TotalNumberStations&#39;</span><span class="p">)</span>
    <span class="n">selected_number_stations</span> <span class="o">=</span> <span class="n">Counter</span><span class="o">.</span><span class="n">T</span><span class="p">(</span><span class="n">optional</span><span class="o">=</span><span class="k">True</span><span class="p">,</span>
                                         <span class="n">xmltagname</span><span class="o">=</span><span class="s">&#39;SelectedNumberStations&#39;</span><span class="p">)</span>
    <span class="n">station_list</span> <span class="o">=</span> <span class="n">List</span><span class="o">.</span><span class="n">T</span><span class="p">(</span><span class="n">Station</span><span class="o">.</span><span class="n">T</span><span class="p">(</span><span class="n">xmltagname</span><span class="o">=</span><span class="s">&#39;Station&#39;</span><span class="p">))</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">station_code_list</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="nb">sorted</span><span class="p">(</span><span class="nb">set</span><span class="p">(</span><span class="n">s</span><span class="o">.</span><span class="n">code</span> <span class="k">for</span> <span class="n">s</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">station_list</span><span class="p">))</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">sl_code_list</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">sls</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>
        <span class="k">for</span> <span class="n">station</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">station_list</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">channel</span> <span class="ow">in</span> <span class="n">station</span><span class="o">.</span><span class="n">channel_list</span><span class="p">:</span>
                <span class="n">sls</span><span class="o">.</span><span class="n">add</span><span class="p">((</span><span class="n">station</span><span class="o">.</span><span class="n">code</span><span class="p">,</span> <span class="n">channel</span><span class="o">.</span><span class="n">location_code</span><span class="p">))</span>

        <span class="k">return</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">sls</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">summary</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">width</span><span class="o">=</span><span class="mi">80</span><span class="p">,</span> <span class="n">indent</span><span class="o">=</span><span class="mi">4</span><span class="p">):</span>
        <span class="n">sls</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">sl_code_list</span> <span class="ow">or</span> <span class="p">[(</span><span class="n">x</span><span class="p">,)</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">station_code_list</span><span class="p">]</span>
        <span class="n">lines</span> <span class="o">=</span> <span class="p">[</span><span class="s">&#39;%s (%i):&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">code</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">sls</span><span class="p">))]</span>
        <span class="k">if</span> <span class="n">sls</span><span class="p">:</span>
            <span class="n">ssls</span> <span class="o">=</span> <span class="p">[</span><span class="s">&#39;.&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">c</span> <span class="k">if</span> <span class="n">x</span><span class="p">)</span> <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="n">sls</span><span class="p">]</span>
            <span class="n">w</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">ssls</span><span class="p">)</span>
            <span class="n">n</span> <span class="o">=</span> <span class="p">(</span><span class="n">width</span> <span class="o">-</span> <span class="n">indent</span><span class="p">)</span> <span class="o">/</span> <span class="p">(</span><span class="n">w</span><span class="o">+</span><span class="mi">1</span><span class="p">)</span>
            <span class="k">while</span> <span class="n">ssls</span><span class="p">:</span>
                <span class="n">lines</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
                    <span class="s">&#39; &#39;</span> <span class="o">*</span> <span class="n">indent</span> <span class="o">+</span> <span class="s">&#39; &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">x</span><span class="o">.</span><span class="n">ljust</span><span class="p">(</span><span class="n">w</span><span class="p">)</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">ssls</span><span class="p">[:</span><span class="n">n</span><span class="p">]))</span>

                <span class="n">ssls</span><span class="p">[:</span><span class="n">n</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>

        <span class="k">return</span> <span class="s">&#39;</span><span class="se">\n</span><span class="s">&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">lines</span><span class="p">)</span></div>


<span class="k">def</span> <span class="nf">value_or_none</span><span class="p">(</span><span class="n">x</span><span class="p">):</span>
    <span class="k">if</span> <span class="n">x</span> <span class="ow">is</span> <span class="ow">not</span> <span class="k">None</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">x</span><span class="o">.</span><span class="n">value</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">return</span> <span class="k">None</span>


<span class="k">def</span> <span class="nf">pyrocko_station_from_channels</span><span class="p">(</span><span class="n">nsl</span><span class="p">,</span> <span class="n">channels</span><span class="p">,</span> <span class="n">inconsistencies</span><span class="o">=</span><span class="s">&#39;warn&#39;</span><span class="p">):</span>

    <span class="n">pos</span> <span class="o">=</span> <span class="n">lat</span><span class="p">,</span> <span class="n">lon</span><span class="p">,</span> <span class="n">elevation</span><span class="p">,</span> <span class="n">depth</span> <span class="o">=</span> \
        <span class="n">channels</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">position_values</span>

    <span class="k">if</span> <span class="ow">not</span> <span class="nb">all</span><span class="p">(</span><span class="n">pos</span> <span class="o">==</span> <span class="n">x</span><span class="o">.</span><span class="n">position_values</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">channels</span><span class="p">):</span>
        <span class="n">info</span> <span class="o">=</span> <span class="s">&#39;</span><span class="se">\n</span><span class="s">&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span>
            <span class="s">&#39;    %s: %s&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">x</span><span class="o">.</span><span class="n">code</span><span class="p">,</span> <span class="n">x</span><span class="o">.</span><span class="n">position_values</span><span class="p">)</span> <span class="k">for</span>
            <span class="n">x</span> <span class="ow">in</span> <span class="n">channels</span><span class="p">)</span>

        <span class="n">mess</span> <span class="o">=</span> <span class="s">&#39;encountered inconsistencies in channel &#39;</span> \
               <span class="s">&#39;lat/lon/elevation/depth &#39;</span> \
               <span class="s">&#39;for %s.%s.%s: </span><span class="se">\n</span><span class="s">%s&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">nsl</span> <span class="o">+</span> <span class="p">(</span><span class="n">info</span><span class="p">,))</span>

        <span class="k">if</span> <span class="n">inconsistencies</span> <span class="o">==</span> <span class="s">&#39;raise&#39;</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">InconsistentChannelLocations</span><span class="p">(</span><span class="n">mess</span><span class="p">)</span>

        <span class="k">elif</span> <span class="n">inconsistencies</span> <span class="o">==</span> <span class="s">&#39;warn&#39;</span><span class="p">:</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">warn</span><span class="p">(</span><span class="n">mess</span><span class="p">)</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">warn</span><span class="p">(</span><span class="s">&#39; -&gt; using mean values&#39;</span><span class="p">)</span>

    <span class="n">apos</span> <span class="o">=</span> <span class="n">num</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="n">x</span><span class="o">.</span><span class="n">position_values</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">channels</span><span class="p">],</span> <span class="n">dtype</span><span class="o">=</span><span class="n">num</span><span class="o">.</span><span class="n">float</span><span class="p">)</span>
    <span class="n">mlat</span><span class="p">,</span> <span class="n">mlon</span><span class="p">,</span> <span class="n">mele</span><span class="p">,</span> <span class="n">mdep</span> <span class="o">=</span> <span class="n">num</span><span class="o">.</span><span class="n">nansum</span><span class="p">(</span><span class="n">apos</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span> \
        <span class="o">/</span> <span class="n">num</span><span class="o">.</span><span class="n">sum</span><span class="p">(</span><span class="n">num</span><span class="o">.</span><span class="n">isfinite</span><span class="p">(</span><span class="n">apos</span><span class="p">),</span> <span class="n">axis</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>

    <span class="n">groups</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="k">for</span> <span class="n">channel</span> <span class="ow">in</span> <span class="n">channels</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">channel</span><span class="o">.</span><span class="n">code</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">groups</span><span class="p">:</span>
            <span class="n">groups</span><span class="p">[</span><span class="n">channel</span><span class="o">.</span><span class="n">code</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>

        <span class="n">groups</span><span class="p">[</span><span class="n">channel</span><span class="o">.</span><span class="n">code</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">channel</span><span class="p">)</span>

    <span class="n">pchannels</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">code</span> <span class="ow">in</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">groups</span><span class="o">.</span><span class="n">keys</span><span class="p">()):</span>
        <span class="n">data</span> <span class="o">=</span> <span class="p">[</span>
            <span class="p">(</span><span class="n">channel</span><span class="o">.</span><span class="n">code</span><span class="p">,</span> <span class="n">value_or_none</span><span class="p">(</span><span class="n">channel</span><span class="o">.</span><span class="n">azimuth</span><span class="p">),</span>
                <span class="n">value_or_none</span><span class="p">(</span><span class="n">channel</span><span class="o">.</span><span class="n">dip</span><span class="p">))</span>
            <span class="k">for</span> <span class="n">channel</span> <span class="ow">in</span> <span class="n">groups</span><span class="p">[</span><span class="n">code</span><span class="p">]]</span>

        <span class="n">azimuth</span><span class="p">,</span> <span class="n">dip</span> <span class="o">=</span> <span class="n">util</span><span class="o">.</span><span class="n">consistency_merge</span><span class="p">(</span>
            <span class="n">data</span><span class="p">,</span>
            <span class="n">message</span><span class="o">=</span><span class="s">&#39;channel orientation values differ:&#39;</span><span class="p">,</span>
            <span class="n">error</span><span class="o">=</span><span class="n">inconsistencies</span><span class="p">)</span>

        <span class="n">pchannels</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">model</span><span class="o">.</span><span class="n">Channel</span><span class="p">(</span><span class="n">code</span><span class="p">,</span> <span class="n">azimuth</span><span class="o">=</span><span class="n">azimuth</span><span class="p">,</span> <span class="n">dip</span><span class="o">=</span><span class="n">dip</span><span class="p">))</span>

    <span class="k">return</span> <span class="n">model</span><span class="o">.</span><span class="n">Station</span><span class="p">(</span>
        <span class="o">*</span><span class="n">nsl</span><span class="p">,</span>
        <span class="n">lat</span><span class="o">=</span><span class="n">mlat</span><span class="p">,</span>
        <span class="n">lon</span><span class="o">=</span><span class="n">mlon</span><span class="p">,</span>
        <span class="n">elevation</span><span class="o">=</span><span class="n">mele</span><span class="p">,</span>
        <span class="n">depth</span><span class="o">=</span><span class="n">mdep</span><span class="p">,</span>
        <span class="n">channels</span><span class="o">=</span><span class="n">pchannels</span><span class="p">)</span>


<div class="viewcode-block" id="FDSNStationXML"><a class="viewcode-back" href="../../../library/reference/fdsn.html#pyrocko.fdsn.station.FDSNStationXML">[docs]</a><span class="k">class</span> <span class="nc">FDSNStationXML</span><span class="p">(</span><span class="n">Object</span><span class="p">):</span>
    <span class="sd">&#39;&#39;&#39;Top-level type for Station XML. Required field are Source</span>
<span class="sd">    (network ID of the institution sending the message) and one or</span>
<span class="sd">    more Network containers or one or more Station containers.&#39;&#39;&#39;</span>

    <span class="n">schema_version</span> <span class="o">=</span> <span class="n">Float</span><span class="o">.</span><span class="n">T</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="mf">1.0</span><span class="p">,</span> <span class="n">xmlstyle</span><span class="o">=</span><span class="s">&#39;attribute&#39;</span><span class="p">)</span>
    <span class="n">source</span> <span class="o">=</span> <span class="n">String</span><span class="o">.</span><span class="n">T</span><span class="p">(</span><span class="n">xmltagname</span><span class="o">=</span><span class="s">&#39;Source&#39;</span><span class="p">)</span>
    <span class="n">sender</span> <span class="o">=</span> <span class="n">String</span><span class="o">.</span><span class="n">T</span><span class="p">(</span><span class="n">optional</span><span class="o">=</span><span class="k">True</span><span class="p">,</span> <span class="n">xmltagname</span><span class="o">=</span><span class="s">&#39;Sender&#39;</span><span class="p">)</span>
    <span class="n">module</span> <span class="o">=</span> <span class="n">String</span><span class="o">.</span><span class="n">T</span><span class="p">(</span><span class="n">optional</span><span class="o">=</span><span class="k">True</span><span class="p">,</span> <span class="n">xmltagname</span><span class="o">=</span><span class="s">&#39;Module&#39;</span><span class="p">)</span>
    <span class="n">module_uri</span> <span class="o">=</span> <span class="n">String</span><span class="o">.</span><span class="n">T</span><span class="p">(</span><span class="n">optional</span><span class="o">=</span><span class="k">True</span><span class="p">,</span> <span class="n">xmltagname</span><span class="o">=</span><span class="s">&#39;ModuleURI&#39;</span><span class="p">)</span>
    <span class="n">created</span> <span class="o">=</span> <span class="n">Timestamp</span><span class="o">.</span><span class="n">T</span><span class="p">(</span><span class="n">xmltagname</span><span class="o">=</span><span class="s">&#39;Created&#39;</span><span class="p">)</span>
    <span class="n">network_list</span> <span class="o">=</span> <span class="n">List</span><span class="o">.</span><span class="n">T</span><span class="p">(</span><span class="n">Network</span><span class="o">.</span><span class="n">T</span><span class="p">(</span><span class="n">xmltagname</span><span class="o">=</span><span class="s">&#39;Network&#39;</span><span class="p">))</span>

    <span class="n">xmltagname</span> <span class="o">=</span> <span class="s">&#39;FDSNStationXML&#39;</span>

    <span class="k">def</span> <span class="nf">get_pyrocko_stations</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">nslcs</span><span class="o">=</span><span class="k">None</span><span class="p">,</span> <span class="n">nsls</span><span class="o">=</span><span class="k">None</span><span class="p">,</span>
                             <span class="n">time</span><span class="o">=</span><span class="k">None</span><span class="p">,</span> <span class="n">timespan</span><span class="o">=</span><span class="k">None</span><span class="p">,</span>
                             <span class="n">inconsistencies</span><span class="o">=</span><span class="s">&#39;warn&#39;</span><span class="p">):</span>

        <span class="k">assert</span> <span class="n">inconsistencies</span> <span class="ow">in</span> <span class="p">(</span><span class="s">&#39;raise&#39;</span><span class="p">,</span> <span class="s">&#39;warn&#39;</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">nslcs</span> <span class="ow">is</span> <span class="ow">not</span> <span class="k">None</span><span class="p">:</span>
            <span class="n">nslcs</span> <span class="o">=</span> <span class="nb">set</span><span class="p">(</span><span class="n">nslcs</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">nsls</span> <span class="ow">is</span> <span class="ow">not</span> <span class="k">None</span><span class="p">:</span>
            <span class="n">nsls</span> <span class="o">=</span> <span class="nb">set</span><span class="p">(</span><span class="n">nsls</span><span class="p">)</span>

        <span class="n">tt</span> <span class="o">=</span> <span class="p">()</span>
        <span class="k">if</span> <span class="n">time</span> <span class="ow">is</span> <span class="ow">not</span> <span class="k">None</span><span class="p">:</span>
            <span class="n">tt</span> <span class="o">=</span> <span class="p">(</span><span class="n">time</span><span class="p">,)</span>
        <span class="k">elif</span> <span class="n">timespan</span> <span class="ow">is</span> <span class="ow">not</span> <span class="k">None</span><span class="p">:</span>
            <span class="n">tt</span> <span class="o">=</span> <span class="n">timespan</span>

        <span class="n">pstations</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">network</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">network_list</span><span class="p">:</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">network</span><span class="o">.</span><span class="n">spans</span><span class="p">(</span><span class="o">*</span><span class="n">tt</span><span class="p">):</span>
                <span class="k">continue</span>

            <span class="k">for</span> <span class="n">station</span> <span class="ow">in</span> <span class="n">network</span><span class="o">.</span><span class="n">station_list</span><span class="p">:</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="n">station</span><span class="o">.</span><span class="n">spans</span><span class="p">(</span><span class="o">*</span><span class="n">tt</span><span class="p">):</span>
                    <span class="k">continue</span>

                <span class="k">if</span> <span class="n">station</span><span class="o">.</span><span class="n">channel_list</span><span class="p">:</span>
                    <span class="n">loc_to_channels</span> <span class="o">=</span> <span class="p">{}</span>
                    <span class="k">for</span> <span class="n">channel</span> <span class="ow">in</span> <span class="n">station</span><span class="o">.</span><span class="n">channel_list</span><span class="p">:</span>
                        <span class="k">if</span> <span class="ow">not</span> <span class="n">channel</span><span class="o">.</span><span class="n">spans</span><span class="p">(</span><span class="o">*</span><span class="n">tt</span><span class="p">):</span>
                            <span class="k">continue</span>

                        <span class="n">loc</span> <span class="o">=</span> <span class="n">channel</span><span class="o">.</span><span class="n">location_code</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
                        <span class="k">if</span> <span class="n">loc</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">loc_to_channels</span><span class="p">:</span>
                            <span class="n">loc_to_channels</span><span class="p">[</span><span class="n">loc</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>

                        <span class="n">loc_to_channels</span><span class="p">[</span><span class="n">loc</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">channel</span><span class="p">)</span>

                    <span class="k">for</span> <span class="n">loc</span> <span class="ow">in</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">loc_to_channels</span><span class="o">.</span><span class="n">keys</span><span class="p">()):</span>
                        <span class="n">channels</span> <span class="o">=</span> <span class="n">loc_to_channels</span><span class="p">[</span><span class="n">loc</span><span class="p">]</span>
                        <span class="k">if</span> <span class="n">nslcs</span> <span class="ow">is</span> <span class="ow">not</span> <span class="k">None</span><span class="p">:</span>
                            <span class="n">channels</span> <span class="o">=</span> <span class="p">[</span><span class="n">channel</span> <span class="k">for</span> <span class="n">channel</span> <span class="ow">in</span> <span class="n">channels</span>
                                        <span class="k">if</span> <span class="p">(</span><span class="n">network</span><span class="o">.</span><span class="n">code</span><span class="p">,</span> <span class="n">station</span><span class="o">.</span><span class="n">code</span><span class="p">,</span> <span class="n">loc</span><span class="p">,</span>
                                            <span class="n">channel</span><span class="o">.</span><span class="n">code</span><span class="p">)</span> <span class="ow">in</span> <span class="n">nslcs</span><span class="p">]</span>

                        <span class="k">if</span> <span class="ow">not</span> <span class="n">channels</span><span class="p">:</span>
                            <span class="k">continue</span>

                        <span class="n">nsl</span> <span class="o">=</span> <span class="n">network</span><span class="o">.</span><span class="n">code</span><span class="p">,</span> <span class="n">station</span><span class="o">.</span><span class="n">code</span><span class="p">,</span> <span class="n">loc</span>
                        <span class="k">if</span> <span class="n">nsls</span> <span class="ow">is</span> <span class="ow">not</span> <span class="k">None</span> <span class="ow">and</span> <span class="n">nsl</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">nsls</span><span class="p">:</span>
                            <span class="k">continue</span>

                        <span class="n">pstations</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
                            <span class="n">pyrocko_station_from_channels</span><span class="p">(</span>
                                <span class="n">nsl</span><span class="p">,</span>
                                <span class="n">channels</span><span class="p">,</span>
                                <span class="n">inconsistencies</span><span class="o">=</span><span class="n">inconsistencies</span><span class="p">))</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">pstations</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">model</span><span class="o">.</span><span class="n">Station</span><span class="p">(</span>
                        <span class="n">network</span><span class="o">.</span><span class="n">code</span><span class="p">,</span> <span class="n">station</span><span class="o">.</span><span class="n">code</span><span class="p">,</span> <span class="s">&#39;*&#39;</span><span class="p">,</span>
                        <span class="n">lat</span><span class="o">=</span><span class="n">station</span><span class="o">.</span><span class="n">latitude</span><span class="o">.</span><span class="n">value</span><span class="p">,</span>
                        <span class="n">lon</span><span class="o">=</span><span class="n">station</span><span class="o">.</span><span class="n">longitude</span><span class="o">.</span><span class="n">value</span><span class="p">,</span>
                        <span class="n">elevation</span><span class="o">=</span><span class="n">value_or_none</span><span class="p">(</span><span class="n">station</span><span class="o">.</span><span class="n">elevation</span><span class="p">),</span>
                        <span class="n">name</span><span class="o">=</span><span class="n">station</span><span class="o">.</span><span class="n">description</span> <span class="ow">or</span> <span class="s">&#39;&#39;</span><span class="p">))</span>

        <span class="k">return</span> <span class="n">pstations</span>

    <span class="nd">@classmethod</span>
<div class="viewcode-block" id="FDSNStationXML.from_pyrocko_stations"><a class="viewcode-back" href="../../../library/reference/fdsn.html#pyrocko.fdsn.station.FDSNStationXML.from_pyrocko_stations">[docs]</a>    <span class="k">def</span> <span class="nf">from_pyrocko_stations</span><span class="p">(</span><span class="n">cls</span><span class="p">,</span> <span class="n">pyrocko_stations</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39; Generate :py:class:`FDSNStationXML` from list of</span>
<span class="sd">        :py:class;`pyrocko.model.Station` instances.</span>

<span class="sd">        :param pyrocko_stations: list of</span>
<span class="sd">            :py:class;`pyrocko.model.Station` instances.</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="kn">from</span> <span class="nn">collections</span> <span class="k">import</span> <span class="n">defaultdict</span>
        <span class="n">network_dict</span> <span class="o">=</span> <span class="n">defaultdict</span><span class="p">(</span><span class="nb">list</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">s</span> <span class="ow">in</span> <span class="n">pyrocko_stations</span><span class="p">:</span>
            <span class="n">network</span><span class="p">,</span> <span class="n">station</span><span class="p">,</span> <span class="n">location</span> <span class="o">=</span> <span class="n">s</span><span class="o">.</span><span class="n">nsl</span><span class="p">()</span>
            <span class="n">channel_list</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="n">s</span><span class="o">.</span><span class="n">channels</span><span class="p">:</span>
                <span class="n">channel_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
                    <span class="n">Channel</span><span class="p">(</span>
                        <span class="n">location_code</span><span class="o">=</span><span class="n">location</span><span class="p">,</span>
                        <span class="n">code</span><span class="o">=</span><span class="n">c</span><span class="o">.</span><span class="n">name</span><span class="p">,</span>
                        <span class="n">latitude</span><span class="o">=</span><span class="n">Latitude</span><span class="p">(</span><span class="n">value</span><span class="o">=</span><span class="n">s</span><span class="o">.</span><span class="n">lat</span><span class="p">),</span>
                        <span class="n">longitude</span><span class="o">=</span><span class="n">Longitude</span><span class="p">(</span><span class="n">value</span><span class="o">=</span><span class="n">s</span><span class="o">.</span><span class="n">lon</span><span class="p">),</span>
                        <span class="n">elevation</span><span class="o">=</span><span class="n">Distance</span><span class="p">(</span><span class="n">value</span><span class="o">=</span><span class="n">s</span><span class="o">.</span><span class="n">elevation</span><span class="p">),</span>
                        <span class="n">depth</span><span class="o">=</span><span class="n">Distance</span><span class="p">(</span><span class="n">value</span><span class="o">=</span><span class="n">s</span><span class="o">.</span><span class="n">depth</span><span class="p">),</span>
                        <span class="n">azimuth</span><span class="o">=</span><span class="n">Azimuth</span><span class="p">(</span><span class="n">value</span><span class="o">=</span><span class="n">c</span><span class="o">.</span><span class="n">azimuth</span><span class="p">),</span>
                        <span class="n">dip</span><span class="o">=</span><span class="n">Dip</span><span class="p">(</span><span class="n">value</span><span class="o">=</span><span class="n">c</span><span class="o">.</span><span class="n">dip</span><span class="p">)</span>
                    <span class="p">)</span>
                <span class="p">)</span>

            <span class="n">network_dict</span><span class="p">[</span><span class="n">network</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
                <span class="n">Station</span><span class="p">(</span>
                    <span class="n">code</span><span class="o">=</span><span class="n">station</span><span class="p">,</span>
                    <span class="n">latitude</span><span class="o">=</span><span class="n">Latitude</span><span class="p">(</span><span class="n">value</span><span class="o">=</span><span class="n">s</span><span class="o">.</span><span class="n">lat</span><span class="p">),</span>
                    <span class="n">longitude</span><span class="o">=</span><span class="n">Longitude</span><span class="p">(</span><span class="n">value</span><span class="o">=</span><span class="n">s</span><span class="o">.</span><span class="n">lon</span><span class="p">),</span>
                    <span class="n">elevation</span><span class="o">=</span><span class="n">Distance</span><span class="p">(</span><span class="n">value</span><span class="o">=</span><span class="n">s</span><span class="o">.</span><span class="n">elevation</span><span class="p">),</span>
                    <span class="n">channel_list</span><span class="o">=</span><span class="n">channel_list</span><span class="p">)</span>
            <span class="p">)</span>

        <span class="n">timestamp</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span>
        <span class="n">network_list</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">station_list</span> <span class="ow">in</span> <span class="n">network_dict</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>

            <span class="n">network_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
                <span class="n">Network</span><span class="p">(</span>
                    <span class="n">code</span><span class="o">=</span><span class="n">k</span><span class="p">,</span> <span class="n">station_list</span><span class="o">=</span><span class="n">station_list</span><span class="p">,</span>
                    <span class="n">total_number_stations</span><span class="o">=</span><span class="nb">len</span><span class="p">(</span><span class="n">station_list</span><span class="p">)))</span>

        <span class="n">sxml</span> <span class="o">=</span> <span class="n">FDSNStationXML</span><span class="p">(</span>
            <span class="n">source</span><span class="o">=</span><span class="s">&#39;from pyrocko stations list&#39;</span><span class="p">,</span> <span class="n">created</span><span class="o">=</span><span class="n">timestamp</span><span class="p">,</span>
            <span class="n">network_list</span><span class="o">=</span><span class="n">network_list</span><span class="p">)</span>

        <span class="n">sxml</span><span class="o">.</span><span class="n">validate</span><span class="p">()</span>
        <span class="k">return</span> <span class="n">sxml</span></div>

    <span class="k">def</span> <span class="nf">iter_network_stations</span><span class="p">(</span>
            <span class="bp">self</span><span class="p">,</span> <span class="n">net</span><span class="o">=</span><span class="k">None</span><span class="p">,</span> <span class="n">sta</span><span class="o">=</span><span class="k">None</span><span class="p">,</span> <span class="n">time</span><span class="o">=</span><span class="k">None</span><span class="p">,</span> <span class="n">timespan</span><span class="o">=</span><span class="k">None</span><span class="p">):</span>

        <span class="n">tt</span> <span class="o">=</span> <span class="p">()</span>
        <span class="k">if</span> <span class="n">time</span> <span class="ow">is</span> <span class="ow">not</span> <span class="k">None</span><span class="p">:</span>
            <span class="n">tt</span> <span class="o">=</span> <span class="p">(</span><span class="n">time</span><span class="p">,)</span>
        <span class="k">elif</span> <span class="n">timespan</span> <span class="ow">is</span> <span class="ow">not</span> <span class="k">None</span><span class="p">:</span>
            <span class="n">tt</span> <span class="o">=</span> <span class="n">timespan</span>

        <span class="k">for</span> <span class="n">network</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">network_list</span><span class="p">:</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">network</span><span class="o">.</span><span class="n">spans</span><span class="p">(</span><span class="o">*</span><span class="n">tt</span><span class="p">)</span> <span class="ow">or</span> <span class="p">(</span>
                    <span class="n">net</span> <span class="ow">is</span> <span class="ow">not</span> <span class="k">None</span> <span class="ow">and</span> <span class="n">network</span><span class="o">.</span><span class="n">code</span> <span class="o">!=</span> <span class="n">net</span><span class="p">):</span>
                <span class="k">continue</span>

            <span class="k">for</span> <span class="n">station</span> <span class="ow">in</span> <span class="n">network</span><span class="o">.</span><span class="n">station_list</span><span class="p">:</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="n">station</span><span class="o">.</span><span class="n">spans</span><span class="p">(</span><span class="o">*</span><span class="n">tt</span><span class="p">)</span> <span class="ow">or</span> <span class="p">(</span>
                        <span class="n">sta</span> <span class="ow">is</span> <span class="ow">not</span> <span class="k">None</span> <span class="ow">and</span> <span class="n">station</span><span class="o">.</span><span class="n">code</span> <span class="o">!=</span> <span class="n">sta</span><span class="p">):</span>
                    <span class="k">continue</span>

                <span class="k">yield</span> <span class="p">(</span><span class="n">network</span><span class="p">,</span> <span class="n">station</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">iter_network_station_channels</span><span class="p">(</span>
            <span class="bp">self</span><span class="p">,</span> <span class="n">net</span><span class="o">=</span><span class="k">None</span><span class="p">,</span> <span class="n">sta</span><span class="o">=</span><span class="k">None</span><span class="p">,</span> <span class="n">loc</span><span class="o">=</span><span class="k">None</span><span class="p">,</span> <span class="n">cha</span><span class="o">=</span><span class="k">None</span><span class="p">,</span>
            <span class="n">time</span><span class="o">=</span><span class="k">None</span><span class="p">,</span> <span class="n">timespan</span><span class="o">=</span><span class="k">None</span><span class="p">):</span>

        <span class="k">if</span> <span class="n">loc</span> <span class="ow">is</span> <span class="ow">not</span> <span class="k">None</span><span class="p">:</span>
            <span class="n">loc</span> <span class="o">=</span> <span class="n">loc</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>

        <span class="n">tt</span> <span class="o">=</span> <span class="p">()</span>
        <span class="k">if</span> <span class="n">time</span> <span class="ow">is</span> <span class="ow">not</span> <span class="k">None</span><span class="p">:</span>
            <span class="n">tt</span> <span class="o">=</span> <span class="p">(</span><span class="n">time</span><span class="p">,)</span>
        <span class="k">elif</span> <span class="n">timespan</span> <span class="ow">is</span> <span class="ow">not</span> <span class="k">None</span><span class="p">:</span>
            <span class="n">tt</span> <span class="o">=</span> <span class="n">timespan</span>

        <span class="k">for</span> <span class="n">network</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">network_list</span><span class="p">:</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">network</span><span class="o">.</span><span class="n">spans</span><span class="p">(</span><span class="o">*</span><span class="n">tt</span><span class="p">)</span> <span class="ow">or</span> <span class="p">(</span>
                    <span class="n">net</span> <span class="ow">is</span> <span class="ow">not</span> <span class="k">None</span> <span class="ow">and</span> <span class="n">network</span><span class="o">.</span><span class="n">code</span> <span class="o">!=</span> <span class="n">net</span><span class="p">):</span>
                <span class="k">continue</span>

            <span class="k">for</span> <span class="n">station</span> <span class="ow">in</span> <span class="n">network</span><span class="o">.</span><span class="n">station_list</span><span class="p">:</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="n">station</span><span class="o">.</span><span class="n">spans</span><span class="p">(</span><span class="o">*</span><span class="n">tt</span><span class="p">)</span> <span class="ow">or</span> <span class="p">(</span>
                        <span class="n">sta</span> <span class="ow">is</span> <span class="ow">not</span> <span class="k">None</span> <span class="ow">and</span> <span class="n">station</span><span class="o">.</span><span class="n">code</span> <span class="o">!=</span> <span class="n">sta</span><span class="p">):</span>
                    <span class="k">continue</span>

                <span class="k">if</span> <span class="n">station</span><span class="o">.</span><span class="n">channel_list</span><span class="p">:</span>
                    <span class="k">for</span> <span class="n">channel</span> <span class="ow">in</span> <span class="n">station</span><span class="o">.</span><span class="n">channel_list</span><span class="p">:</span>
                        <span class="k">if</span> <span class="p">(</span><span class="ow">not</span> <span class="n">channel</span><span class="o">.</span><span class="n">spans</span><span class="p">(</span><span class="o">*</span><span class="n">tt</span><span class="p">)</span> <span class="ow">or</span>
                                <span class="p">(</span><span class="n">cha</span> <span class="ow">is</span> <span class="ow">not</span> <span class="k">None</span> <span class="ow">and</span> <span class="n">channel</span><span class="o">.</span><span class="n">code</span> <span class="o">!=</span> <span class="n">cha</span><span class="p">)</span> <span class="ow">or</span>
                                <span class="p">(</span><span class="n">loc</span> <span class="ow">is</span> <span class="ow">not</span> <span class="k">None</span> <span class="ow">and</span>
                                 <span class="n">channel</span><span class="o">.</span><span class="n">location_code</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span> <span class="o">!=</span> <span class="n">loc</span><span class="p">)):</span>
                            <span class="k">continue</span>

                        <span class="k">yield</span> <span class="p">(</span><span class="n">network</span><span class="p">,</span> <span class="n">station</span><span class="p">,</span> <span class="n">channel</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">get_channel_groups</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">net</span><span class="o">=</span><span class="k">None</span><span class="p">,</span> <span class="n">sta</span><span class="o">=</span><span class="k">None</span><span class="p">,</span> <span class="n">loc</span><span class="o">=</span><span class="k">None</span><span class="p">,</span> <span class="n">cha</span><span class="o">=</span><span class="k">None</span><span class="p">,</span>
                           <span class="n">time</span><span class="o">=</span><span class="k">None</span><span class="p">,</span> <span class="n">timespan</span><span class="o">=</span><span class="k">None</span><span class="p">):</span>

        <span class="n">groups</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">for</span> <span class="n">network</span><span class="p">,</span> <span class="n">station</span><span class="p">,</span> <span class="n">channel</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">iter_network_station_channels</span><span class="p">(</span>
                <span class="n">net</span><span class="p">,</span> <span class="n">sta</span><span class="p">,</span> <span class="n">loc</span><span class="p">,</span> <span class="n">cha</span><span class="p">,</span> <span class="n">time</span><span class="o">=</span><span class="n">time</span><span class="p">,</span> <span class="n">timespan</span><span class="o">=</span><span class="n">timespan</span><span class="p">):</span>

            <span class="n">net</span> <span class="o">=</span> <span class="n">network</span><span class="o">.</span><span class="n">code</span>
            <span class="n">sta</span> <span class="o">=</span> <span class="n">station</span><span class="o">.</span><span class="n">code</span>
            <span class="n">cha</span> <span class="o">=</span> <span class="n">channel</span><span class="o">.</span><span class="n">code</span>
            <span class="n">loc</span> <span class="o">=</span> <span class="n">channel</span><span class="o">.</span><span class="n">location_code</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">cha</span><span class="p">)</span> <span class="o">==</span> <span class="mi">3</span><span class="p">:</span>
                <span class="n">bic</span> <span class="o">=</span> <span class="n">cha</span><span class="p">[:</span><span class="mi">2</span><span class="p">]</span>  <span class="c"># band and intrument code according to SEED</span>
            <span class="k">elif</span> <span class="nb">len</span><span class="p">(</span><span class="n">cha</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
                <span class="n">bic</span> <span class="o">=</span> <span class="s">&#39;&#39;</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">bic</span> <span class="o">=</span> <span class="n">cha</span>

            <span class="k">if</span> <span class="n">channel</span><span class="o">.</span><span class="n">response</span> <span class="ow">and</span> \
                    <span class="n">channel</span><span class="o">.</span><span class="n">response</span><span class="o">.</span><span class="n">instrument_sensitivity</span> <span class="ow">and</span> \
                    <span class="n">channel</span><span class="o">.</span><span class="n">response</span><span class="o">.</span><span class="n">instrument_sensitivity</span><span class="o">.</span><span class="n">input_units</span><span class="p">:</span>

                <span class="n">unit</span> <span class="o">=</span> <span class="n">channel</span><span class="o">.</span><span class="n">response</span><span class="o">.</span><span class="n">instrument_sensitivity</span><span class="o">.</span><span class="n">input_units</span><span class="o">.</span><span class="n">name</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">unit</span> <span class="o">=</span> <span class="k">None</span>

            <span class="n">bic</span> <span class="o">=</span> <span class="p">(</span><span class="n">bic</span><span class="p">,</span> <span class="n">unit</span><span class="p">)</span>

            <span class="n">k</span> <span class="o">=</span> <span class="n">net</span><span class="p">,</span> <span class="n">sta</span><span class="p">,</span> <span class="n">loc</span>
            <span class="k">if</span> <span class="n">k</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">groups</span><span class="p">:</span>
                <span class="n">groups</span><span class="p">[</span><span class="n">k</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>

            <span class="k">if</span> <span class="n">bic</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">groups</span><span class="p">[</span><span class="n">k</span><span class="p">]:</span>
                <span class="n">groups</span><span class="p">[</span><span class="n">k</span><span class="p">][</span><span class="n">bic</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>

            <span class="n">groups</span><span class="p">[</span><span class="n">k</span><span class="p">][</span><span class="n">bic</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">channel</span><span class="p">)</span>

        <span class="k">for</span> <span class="n">nsl</span><span class="p">,</span> <span class="n">bic_to_channels</span> <span class="ow">in</span> <span class="n">groups</span><span class="o">.</span><span class="n">iteritems</span><span class="p">():</span>
            <span class="n">bad_bics</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="k">for</span> <span class="n">bic</span><span class="p">,</span> <span class="n">channels</span> <span class="ow">in</span> <span class="n">bic_to_channels</span><span class="o">.</span><span class="n">iteritems</span><span class="p">():</span>
                <span class="n">sample_rates</span> <span class="o">=</span> <span class="p">[]</span>
                <span class="k">for</span> <span class="n">channel</span> <span class="ow">in</span> <span class="n">channels</span><span class="p">:</span>
                    <span class="n">sample_rates</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">channel</span><span class="o">.</span><span class="n">sample_rate</span><span class="o">.</span><span class="n">value</span><span class="p">)</span>

                <span class="k">if</span> <span class="ow">not</span> <span class="n">same</span><span class="p">(</span><span class="n">sample_rates</span><span class="p">):</span>
                    <span class="n">scs</span> <span class="o">=</span> <span class="s">&#39;,&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">channel</span><span class="o">.</span><span class="n">code</span> <span class="k">for</span> <span class="n">channel</span> <span class="ow">in</span> <span class="n">channels</span><span class="p">)</span>
                    <span class="n">srs</span> <span class="o">=</span> <span class="s">&#39;, &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="s">&#39;%e&#39;</span> <span class="o">%</span> <span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">sample_rates</span><span class="p">)</span>
                    <span class="n">err</span> <span class="o">=</span> <span class="s">&#39;ignoring channels with inconsistent sampling &#39;</span> <span class="o">+</span> \
                          <span class="s">&#39;rates (%s.%s.%s.%s: %s)&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">nsl</span> <span class="o">+</span> <span class="p">(</span><span class="n">scs</span><span class="p">,</span> <span class="n">srs</span><span class="p">))</span>

                    <span class="n">logger</span><span class="o">.</span><span class="n">warn</span><span class="p">(</span><span class="n">err</span><span class="p">)</span>
                    <span class="n">bad_bics</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">bic</span><span class="p">)</span>

            <span class="k">for</span> <span class="n">bic</span> <span class="ow">in</span> <span class="n">bad_bics</span><span class="p">:</span>
                <span class="k">del</span> <span class="n">bic_to_channels</span><span class="p">[</span><span class="n">bic</span><span class="p">]</span>

        <span class="k">return</span> <span class="n">groups</span>

    <span class="k">def</span> <span class="nf">choose_channels</span><span class="p">(</span>
            <span class="bp">self</span><span class="p">,</span>
            <span class="n">target_sample_rate</span><span class="o">=</span><span class="k">None</span><span class="p">,</span>
            <span class="n">priority_band_code</span><span class="o">=</span><span class="p">[</span><span class="s">&#39;H&#39;</span><span class="p">,</span> <span class="s">&#39;B&#39;</span><span class="p">,</span> <span class="s">&#39;M&#39;</span><span class="p">,</span> <span class="s">&#39;L&#39;</span><span class="p">,</span> <span class="s">&#39;V&#39;</span><span class="p">,</span> <span class="s">&#39;E&#39;</span><span class="p">,</span> <span class="s">&#39;S&#39;</span><span class="p">],</span>
            <span class="n">priority_units</span><span class="o">=</span><span class="p">[</span><span class="s">&#39;M/S&#39;</span><span class="p">,</span> <span class="s">&#39;M/S**2&#39;</span><span class="p">],</span>
            <span class="n">priority_instrument_code</span><span class="o">=</span><span class="p">[</span><span class="s">&#39;H&#39;</span><span class="p">,</span> <span class="s">&#39;L&#39;</span><span class="p">],</span>
            <span class="n">time</span><span class="o">=</span><span class="k">None</span><span class="p">,</span>
            <span class="n">timespan</span><span class="o">=</span><span class="k">None</span><span class="p">):</span>

        <span class="n">nslcs</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">for</span> <span class="n">nsl</span><span class="p">,</span> <span class="n">bic_to_channels</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_channel_groups</span><span class="p">(</span>
                <span class="n">time</span><span class="o">=</span><span class="n">time</span><span class="p">,</span> <span class="n">timespan</span><span class="o">=</span><span class="n">timespan</span><span class="p">)</span><span class="o">.</span><span class="n">iteritems</span><span class="p">():</span>

            <span class="n">useful_bics</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="k">for</span> <span class="n">bic</span><span class="p">,</span> <span class="n">channels</span> <span class="ow">in</span> <span class="n">bic_to_channels</span><span class="o">.</span><span class="n">iteritems</span><span class="p">():</span>
                <span class="n">rate</span> <span class="o">=</span> <span class="n">channels</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">sample_rate</span><span class="o">.</span><span class="n">value</span>

                <span class="k">if</span> <span class="n">target_sample_rate</span> <span class="ow">is</span> <span class="ow">not</span> <span class="k">None</span> <span class="ow">and</span> \
                        <span class="n">rate</span> <span class="o">&lt;</span> <span class="n">target_sample_rate</span><span class="o">*</span><span class="mf">0.99999</span><span class="p">:</span>
                    <span class="k">continue</span>

                <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">bic</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="o">==</span> <span class="mi">2</span><span class="p">:</span>
                    <span class="k">if</span> <span class="n">bic</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">priority_band_code</span><span class="p">:</span>
                        <span class="k">continue</span>

                    <span class="k">if</span> <span class="n">bic</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">priority_instrument_code</span><span class="p">:</span>
                        <span class="k">continue</span>

                <span class="n">unit</span> <span class="o">=</span> <span class="n">bic</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>

                <span class="n">prio_unit</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">priority_units</span><span class="p">)</span>
                <span class="k">try</span><span class="p">:</span>
                    <span class="n">prio_unit</span> <span class="o">=</span> <span class="n">priority_units</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="n">unit</span><span class="p">)</span>
                <span class="k">except</span> <span class="ne">ValueError</span><span class="p">:</span>
                    <span class="k">pass</span>

                <span class="n">prio_inst</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">priority_instrument_code</span><span class="p">)</span>
                <span class="n">prio_band</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">priority_band_code</span><span class="p">)</span>
                <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">channels</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">code</span><span class="p">)</span> <span class="o">==</span> <span class="mi">3</span><span class="p">:</span>
                    <span class="k">try</span><span class="p">:</span>
                        <span class="n">prio_inst</span> <span class="o">=</span> <span class="n">priority_instrument_code</span><span class="o">.</span><span class="n">index</span><span class="p">(</span>
                            <span class="n">channels</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">code</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
                    <span class="k">except</span> <span class="ne">ValueError</span><span class="p">:</span>
                        <span class="k">pass</span>

                    <span class="k">try</span><span class="p">:</span>
                        <span class="n">prio_band</span> <span class="o">=</span> <span class="n">priority_band_code</span><span class="o">.</span><span class="n">index</span><span class="p">(</span>
                            <span class="n">channels</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">code</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
                    <span class="k">except</span> <span class="ne">ValueError</span><span class="p">:</span>
                        <span class="k">pass</span>

                <span class="k">if</span> <span class="n">target_sample_rate</span> <span class="ow">is</span> <span class="k">None</span><span class="p">:</span>
                    <span class="n">rate</span> <span class="o">=</span> <span class="o">-</span><span class="n">rate</span>

                <span class="n">useful_bics</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="o">-</span><span class="nb">len</span><span class="p">(</span><span class="n">channels</span><span class="p">),</span> <span class="n">prio_band</span><span class="p">,</span> <span class="n">rate</span><span class="p">,</span> <span class="n">prio_unit</span><span class="p">,</span>
                                    <span class="n">prio_inst</span><span class="p">,</span> <span class="n">bic</span><span class="p">))</span>

            <span class="n">useful_bics</span><span class="o">.</span><span class="n">sort</span><span class="p">()</span>

            <span class="k">for</span> <span class="n">_</span><span class="p">,</span> <span class="n">_</span><span class="p">,</span> <span class="n">rate</span><span class="p">,</span> <span class="n">_</span><span class="p">,</span> <span class="n">_</span><span class="p">,</span> <span class="n">bic</span> <span class="ow">in</span> <span class="n">useful_bics</span><span class="p">:</span>
                <span class="n">channels</span> <span class="o">=</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">bic_to_channels</span><span class="p">[</span><span class="n">bic</span><span class="p">])</span>
                <span class="k">if</span> <span class="n">channels</span><span class="p">:</span>
                    <span class="k">for</span> <span class="n">channel</span> <span class="ow">in</span> <span class="n">channels</span><span class="p">:</span>
                        <span class="n">nslcs</span><span class="p">[</span><span class="n">nsl</span> <span class="o">+</span> <span class="p">(</span><span class="n">channel</span><span class="o">.</span><span class="n">code</span><span class="p">,)]</span> <span class="o">=</span> <span class="n">channel</span>

                    <span class="k">break</span>

        <span class="k">return</span> <span class="n">nslcs</span>

    <span class="k">def</span> <span class="nf">get_pyrocko_response</span><span class="p">(</span>
            <span class="bp">self</span><span class="p">,</span> <span class="n">nslc</span><span class="p">,</span> <span class="n">time</span><span class="o">=</span><span class="k">None</span><span class="p">,</span> <span class="n">timespan</span><span class="o">=</span><span class="k">None</span><span class="p">,</span> <span class="n">fake_input_units</span><span class="o">=</span><span class="k">None</span><span class="p">):</span>

        <span class="n">net</span><span class="p">,</span> <span class="n">sta</span><span class="p">,</span> <span class="n">loc</span><span class="p">,</span> <span class="n">cha</span> <span class="o">=</span> <span class="n">nslc</span>
        <span class="n">resps</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">_</span><span class="p">,</span> <span class="n">_</span><span class="p">,</span> <span class="n">channel</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">iter_network_station_channels</span><span class="p">(</span>
                <span class="n">net</span><span class="p">,</span> <span class="n">sta</span><span class="p">,</span> <span class="n">loc</span><span class="p">,</span> <span class="n">cha</span><span class="p">,</span> <span class="n">time</span><span class="o">=</span><span class="n">time</span><span class="p">,</span> <span class="n">timespan</span><span class="o">=</span><span class="n">timespan</span><span class="p">):</span>
            <span class="n">resp</span> <span class="o">=</span> <span class="n">channel</span><span class="o">.</span><span class="n">response</span>
            <span class="k">if</span> <span class="n">resp</span><span class="p">:</span>
                <span class="n">resps</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">resp</span><span class="o">.</span><span class="n">get_pyrocko_response</span><span class="p">(</span>
                    <span class="n">nslc</span><span class="p">,</span> <span class="n">fake_input_units</span><span class="o">=</span><span class="n">fake_input_units</span><span class="p">))</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="n">resps</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">NoResponseInformation</span><span class="p">(</span><span class="s">&#39;%s.%s.%s.%s&#39;</span> <span class="o">%</span> <span class="n">nslc</span><span class="p">)</span>
        <span class="k">elif</span> <span class="nb">len</span><span class="p">(</span><span class="n">resps</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">MultipleResponseInformation</span><span class="p">(</span><span class="s">&#39;%s.%s.%s.%s&#39;</span> <span class="o">%</span> <span class="n">nslc</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">resps</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">n_code_list</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="nb">sorted</span><span class="p">(</span><span class="nb">set</span><span class="p">(</span><span class="n">x</span><span class="o">.</span><span class="n">code</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">network_list</span><span class="p">))</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">ns_code_list</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">nss</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>
        <span class="k">for</span> <span class="n">network</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">network_list</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">station</span> <span class="ow">in</span> <span class="n">network</span><span class="o">.</span><span class="n">station_list</span><span class="p">:</span>
                <span class="n">nss</span><span class="o">.</span><span class="n">add</span><span class="p">((</span><span class="n">network</span><span class="o">.</span><span class="n">code</span><span class="p">,</span> <span class="n">station</span><span class="o">.</span><span class="n">code</span><span class="p">))</span>

        <span class="k">return</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">nss</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">nsl_code_list</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">nsls</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>
        <span class="k">for</span> <span class="n">network</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">network_list</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">station</span> <span class="ow">in</span> <span class="n">network</span><span class="o">.</span><span class="n">station_list</span><span class="p">:</span>
                <span class="k">for</span> <span class="n">channel</span> <span class="ow">in</span> <span class="n">station</span><span class="o">.</span><span class="n">channel_list</span><span class="p">:</span>
                    <span class="n">nsls</span><span class="o">.</span><span class="n">add</span><span class="p">(</span>
                        <span class="p">(</span><span class="n">network</span><span class="o">.</span><span class="n">code</span><span class="p">,</span> <span class="n">station</span><span class="o">.</span><span class="n">code</span><span class="p">,</span> <span class="n">channel</span><span class="o">.</span><span class="n">location_code</span><span class="p">))</span>

        <span class="k">return</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">nsls</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">nslc_code_list</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">nslcs</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>
        <span class="k">for</span> <span class="n">network</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">network_list</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">station</span> <span class="ow">in</span> <span class="n">network</span><span class="o">.</span><span class="n">station_list</span><span class="p">:</span>
                <span class="k">for</span> <span class="n">channel</span> <span class="ow">in</span> <span class="n">station</span><span class="o">.</span><span class="n">channel_list</span><span class="p">:</span>
                    <span class="n">nslcs</span><span class="o">.</span><span class="n">add</span><span class="p">(</span>
                        <span class="p">(</span><span class="n">network</span><span class="o">.</span><span class="n">code</span><span class="p">,</span> <span class="n">station</span><span class="o">.</span><span class="n">code</span><span class="p">,</span> <span class="n">channel</span><span class="o">.</span><span class="n">location_code</span><span class="p">,</span>
                            <span class="n">channel</span><span class="o">.</span><span class="n">code</span><span class="p">))</span>

        <span class="k">return</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">nslcs</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">summary</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">l</span> <span class="o">=</span> <span class="p">[</span>
            <span class="s">&#39;number of n codes: %i&#39;</span> <span class="o">%</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">n_code_list</span><span class="p">),</span>
            <span class="s">&#39;number of ns codes: %i&#39;</span> <span class="o">%</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">ns_code_list</span><span class="p">),</span>
            <span class="s">&#39;number of nsl codes: %i&#39;</span> <span class="o">%</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">nsl_code_list</span><span class="p">),</span>
            <span class="s">&#39;number of nslc codes: %i&#39;</span> <span class="o">%</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">nslc_code_list</span><span class="p">)</span>
        <span class="p">]</span>

        <span class="k">return</span> <span class="s">&#39;</span><span class="se">\n</span><span class="s">&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">l</span><span class="p">)</span></div>


<span class="k">class</span> <span class="nc">InconsistentChannelLocations</span><span class="p">(</span><span class="ne">Exception</span><span class="p">):</span>
    <span class="k">pass</span>


<span class="k">class</span> <span class="nc">InvalidRecord</span><span class="p">(</span><span class="ne">Exception</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">line</span><span class="p">):</span>
        <span class="ne">Exception</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_line</span> <span class="o">=</span> <span class="n">line</span>

    <span class="k">def</span> <span class="nf">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="s">&#39;Invalid record: &quot;%s&quot;&#39;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">_line</span>


<span class="k">def</span> <span class="nf">load_channel_table</span><span class="p">(</span><span class="n">stream</span><span class="p">):</span>

    <span class="n">networks</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="n">stations</span> <span class="o">=</span> <span class="p">{}</span>

    <span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="n">stream</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">line</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s">&#39;#&#39;</span><span class="p">):</span>
            <span class="k">continue</span>

        <span class="n">t</span> <span class="o">=</span> <span class="n">line</span><span class="o">.</span><span class="n">rstrip</span><span class="p">()</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s">&#39;|&#39;</span><span class="p">)</span>

        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">t</span><span class="p">)</span> <span class="o">!=</span> <span class="mi">17</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">InvalidRecord</span><span class="p">(</span><span class="n">line</span><span class="p">)</span>

        <span class="p">(</span><span class="n">net</span><span class="p">,</span> <span class="n">sta</span><span class="p">,</span> <span class="n">loc</span><span class="p">,</span> <span class="n">cha</span><span class="p">,</span> <span class="n">lat</span><span class="p">,</span> <span class="n">lon</span><span class="p">,</span> <span class="n">ele</span><span class="p">,</span> <span class="n">dep</span><span class="p">,</span> <span class="n">azi</span><span class="p">,</span> <span class="n">dip</span><span class="p">,</span> <span class="n">sens</span><span class="p">,</span> <span class="n">scale</span><span class="p">,</span>
            <span class="n">scale_freq</span><span class="p">,</span> <span class="n">scale_units</span><span class="p">,</span> <span class="n">sample_rate</span><span class="p">,</span> <span class="n">start_date</span><span class="p">,</span> <span class="n">end_date</span><span class="p">)</span> <span class="o">=</span> <span class="n">t</span>

        <span class="k">try</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">net</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">networks</span><span class="p">:</span>
                <span class="n">network</span> <span class="o">=</span> <span class="n">Network</span><span class="p">(</span><span class="n">code</span><span class="o">=</span><span class="n">net</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">network</span> <span class="o">=</span> <span class="n">networks</span><span class="p">[</span><span class="n">net</span><span class="p">]</span>

            <span class="k">if</span> <span class="p">(</span><span class="n">net</span><span class="p">,</span> <span class="n">sta</span><span class="p">)</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">stations</span><span class="p">:</span>
                <span class="n">station</span> <span class="o">=</span> <span class="n">Station</span><span class="p">(</span>
                    <span class="n">code</span><span class="o">=</span><span class="n">sta</span><span class="p">,</span> <span class="n">latitude</span><span class="o">=</span><span class="n">lat</span><span class="p">,</span> <span class="n">longitude</span><span class="o">=</span><span class="n">lon</span><span class="p">,</span> <span class="n">elevation</span><span class="o">=</span><span class="n">ele</span><span class="p">)</span>

                <span class="n">station</span><span class="o">.</span><span class="n">regularize</span><span class="p">()</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">station</span> <span class="o">=</span> <span class="n">stations</span><span class="p">[</span><span class="n">net</span><span class="p">,</span> <span class="n">sta</span><span class="p">]</span>

            <span class="k">if</span> <span class="n">scale</span><span class="p">:</span>
                <span class="n">resp</span> <span class="o">=</span> <span class="n">Response</span><span class="p">(</span>
                    <span class="n">instrument_sensitivity</span><span class="o">=</span><span class="n">Sensitivity</span><span class="p">(</span>
                        <span class="n">value</span><span class="o">=</span><span class="n">scale</span><span class="p">,</span>
                        <span class="n">frequency</span><span class="o">=</span><span class="n">scale_freq</span><span class="p">,</span>
                        <span class="n">input_units</span><span class="o">=</span><span class="n">scale_units</span><span class="p">))</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">resp</span> <span class="o">=</span> <span class="k">None</span>

            <span class="n">channel</span> <span class="o">=</span> <span class="n">Channel</span><span class="p">(</span>
                <span class="n">code</span><span class="o">=</span><span class="n">cha</span><span class="p">,</span>
                <span class="n">location_code</span><span class="o">=</span><span class="n">loc</span><span class="o">.</span><span class="n">strip</span><span class="p">(),</span>
                <span class="n">latitude</span><span class="o">=</span><span class="n">lat</span><span class="p">,</span>
                <span class="n">longitude</span><span class="o">=</span><span class="n">lon</span><span class="p">,</span>
                <span class="n">elevation</span><span class="o">=</span><span class="n">ele</span><span class="p">,</span>
                <span class="n">depth</span><span class="o">=</span><span class="n">dep</span><span class="p">,</span>
                <span class="n">azimuth</span><span class="o">=</span><span class="n">azi</span><span class="p">,</span>
                <span class="n">dip</span><span class="o">=</span><span class="n">dip</span><span class="p">,</span>
                <span class="n">sensor</span><span class="o">=</span><span class="n">Equipment</span><span class="p">(</span><span class="n">description</span><span class="o">=</span><span class="n">sens</span><span class="p">),</span>
                <span class="n">response</span><span class="o">=</span><span class="n">resp</span><span class="p">,</span>
                <span class="n">sample_rate</span><span class="o">=</span><span class="n">sample_rate</span><span class="p">,</span>
                <span class="n">start_date</span><span class="o">=</span><span class="n">start_date</span><span class="p">,</span>
                <span class="n">end_date</span><span class="o">=</span><span class="n">end_date</span> <span class="ow">or</span> <span class="k">None</span><span class="p">)</span>

            <span class="n">channel</span><span class="o">.</span><span class="n">regularize</span><span class="p">()</span>

        <span class="k">except</span> <span class="n">ValidationError</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">InvalidRecord</span><span class="p">(</span><span class="n">line</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">net</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">networks</span><span class="p">:</span>
            <span class="n">networks</span><span class="p">[</span><span class="n">net</span><span class="p">]</span> <span class="o">=</span> <span class="n">network</span>

        <span class="k">if</span> <span class="p">(</span><span class="n">net</span><span class="p">,</span> <span class="n">sta</span><span class="p">)</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">stations</span><span class="p">:</span>
            <span class="n">stations</span><span class="p">[</span><span class="n">net</span><span class="p">,</span> <span class="n">sta</span><span class="p">]</span> <span class="o">=</span> <span class="n">station</span>
            <span class="n">network</span><span class="o">.</span><span class="n">station_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">station</span><span class="p">)</span>

        <span class="n">station</span><span class="o">.</span><span class="n">channel_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">channel</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">FDSNStationXML</span><span class="p">(</span>
        <span class="n">source</span><span class="o">=</span><span class="s">&#39;created from table input&#39;</span><span class="p">,</span>
        <span class="n">created</span><span class="o">=</span><span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">(),</span>
        <span class="n">network_list</span><span class="o">=</span><span class="nb">sorted</span><span class="p">(</span><span class="n">networks</span><span class="o">.</span><span class="n">values</span><span class="p">(),</span> <span class="n">key</span><span class="o">=</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="o">.</span><span class="n">code</span><span class="p">))</span>


<span class="k">def</span> <span class="nf">primitive_merge</span><span class="p">(</span><span class="n">sxs</span><span class="p">):</span>
    <span class="n">networks</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">sx</span> <span class="ow">in</span> <span class="n">sxs</span><span class="p">:</span>
        <span class="n">networks</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">sx</span><span class="o">.</span><span class="n">network_list</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">FDSNStationXML</span><span class="p">(</span>
        <span class="n">source</span><span class="o">=</span><span class="s">&#39;merged from different sources&#39;</span><span class="p">,</span>
        <span class="n">created</span><span class="o">=</span><span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">(),</span>
        <span class="n">network_list</span><span class="o">=</span><span class="n">copy</span><span class="o">.</span><span class="n">deepcopy</span><span class="p">(</span>
            <span class="nb">sorted</span><span class="p">(</span><span class="n">networks</span><span class="p">,</span> <span class="n">key</span><span class="o">=</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="o">.</span><span class="n">code</span><span class="p">)))</span>
</pre></div>

          </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
    &nbsp;
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../../../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
      </ul>
    </div>

    <div class="footer" role="contentinfo">
        &#169; Copyright 2017, The Pyrocko Developers.
    </div>
  </body>
</html>